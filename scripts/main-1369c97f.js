+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var r in e)if(void 0!==t.style[r])return{end:e[r]};return!1}t.fn.emulateTransitionEnd=function(e){var r=!1,n=this;t(this).one(t.support.transition.end,function(){r=!0});var i=function(){r||t(n).trigger(t.support.transition.end)};return setTimeout(i,e),this},t(function(){t.support.transition=e()})}(jQuery),+function(t){"use strict";var e=function(r,n){this.options=t.extend({},e.DEFAULTS,n),this.$window=t(window).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(r),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};e.RESET="affix affix-top affix-bottom",e.DEFAULTS={offset:0},e.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(e.RESET).addClass("affix");var t=this.$window.scrollTop(),r=this.$element.offset();return this.pinnedOffset=r.top-t},e.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},e.prototype.checkPosition=function(){if(this.$element.is(":visible")){var r=t(document).height(),n=this.$window.scrollTop(),i=this.$element.offset(),a=this.options.offset,o=a.top,s=a.bottom;"top"==this.affixed&&(i.top+=n),"object"!=typeof a&&(s=o=a),"function"==typeof o&&(o=a.top(this.$element)),"function"==typeof s&&(s=a.bottom(this.$element));var l=null!=this.unpin&&n+this.unpin<=i.top?!1:null!=s&&i.top+this.$element.height()>=r-s?"bottom":null!=o&&o>=n?"top":!1;if(this.affixed!==l){this.unpin&&this.$element.css("top","");var u="affix"+(l?"-"+l:""),c=t.Event(u+".bs.affix");this.$element.trigger(c),c.isDefaultPrevented()||(this.affixed=l,this.unpin="bottom"==l?this.getPinnedOffset():null,this.$element.removeClass(e.RESET).addClass(u).trigger(t.Event(u.replace("affix","affixed"))),"bottom"==l&&this.$element.offset({top:r-s-this.$element.height()}))}}};var r=t.fn.affix;t.fn.affix=function(r){return this.each(function(){var n=t(this),i=n.data("bs.affix"),a="object"==typeof r&&r;i||n.data("bs.affix",i=new e(this,a)),"string"==typeof r&&i[r]()})},t.fn.affix.Constructor=e,t.fn.affix.noConflict=function(){return t.fn.affix=r,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var e=t(this),r=e.data();r.offset=r.offset||{},r.offsetBottom&&(r.offset.bottom=r.offsetBottom),r.offsetTop&&(r.offset.top=r.offsetTop),e.affix(r)})})}(jQuery),+function(t){"use strict";var e=function(r,n){this.$element=t(r),this.options=t.extend({},e.DEFAULTS,n),this.transitioning=null,this.options.parent&&(this.$parent=t(this.options.parent)),this.options.toggle&&this.toggle()};e.DEFAULTS={toggle:!0},e.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},e.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e=t.Event("show.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var r=this.$parent&&this.$parent.find("> .panel > .in");if(r&&r.length){var n=r.data("bs.collapse");if(n&&n.transitioning)return;r.collapse("hide"),n||r.data("bs.collapse",null)}var i=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[i](0),this.transitioning=1;var a=function(){this.$element.removeClass("collapsing").addClass("collapse in")[i]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return a.call(this);var o=t.camelCase(["scroll",i].join("-"));this.$element.one(t.support.transition.end,t.proxy(a,this)).emulateTransitionEnd(350)[i](this.$element[0][o])}}},e.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var r=this.dimension();this.$element[r](this.$element[r]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var n=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return t.support.transition?void this.$element[r](0).one(t.support.transition.end,t.proxy(n,this)).emulateTransitionEnd(350):n.call(this)}}},e.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var r=t.fn.collapse;t.fn.collapse=function(r){return this.each(function(){var n=t(this),i=n.data("bs.collapse"),a=t.extend({},e.DEFAULTS,n.data(),"object"==typeof r&&r);!i&&a.toggle&&"show"==r&&(r=!r),i||n.data("bs.collapse",i=new e(this,a)),"string"==typeof r&&i[r]()})},t.fn.collapse.Constructor=e,t.fn.collapse.noConflict=function(){return t.fn.collapse=r,this},t(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(e){var r,n=t(this),i=n.attr("data-target")||e.preventDefault()||(r=n.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,""),a=t(i),o=a.data("bs.collapse"),s=o?"toggle":n.data(),l=n.attr("data-parent"),u=l&&t(l);o&&o.transitioning||(u&&u.find('[data-toggle=collapse][data-parent="'+l+'"]').not(n).addClass("collapsed"),n[a.hasClass("in")?"addClass":"removeClass"]("collapsed")),a.collapse(s)})}(jQuery),angular.module("tbk.githubVersion",[]).directive("tbkGithubVersion",function(){var t={scope:{repo:"@tbkGithubVersion"},template:"<span>{{version}}</span>",controller:["$scope","$http",function(t,e){t.version="?",e.get("https://api.github.com/repos/"+t.repo+"/git/refs/tags",{cache:!0}).success(function(e){if(angular.isArray(e)&&e.length>0){var r=e[e.length-1],n=r.ref.search(/(\d(\.)?){3}$/);if(n>-1){var i=r.ref.substring(n,r.ref.length);t.version=i}}})}],link:function(t,e){e.addClass("tbk-github-version")}};return t}),function t(e,r,n){function i(o,s){if(!r[o]){if(!e[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(a)return a(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var c=r[o]={exports:{}};e[o][0].call(c.exports,function(t){var r=e[o][1][t];return i(r?r:t)},c,c.exports,t,e,r,n)}return r[o].exports}for(var a="function"==typeof require&&require,o=0;o<n.length;o++)i(n[o]);return i}({1:[function(require,module,exports){!function(exports){"function"!=typeof exports.decycle&&(exports.decycle=function(t){var e=[],r=[];return function n(t,i){var a,o,s;switch(typeof t){case"object":if(!t)return null;for(a=0;a<e.length;a+=1)if(e[a]===t)return{$ref:r[a]};if(e.push(t),r.push(i),"[object Array]"===Object.prototype.toString.apply(t))for(s=[],a=0;a<t.length;a+=1)s[a]=n(t[a],i+"["+a+"]");else{s={};for(o in t)Object.prototype.hasOwnProperty.call(t,o)&&(s[o]=n(t[o],i+"["+JSON.stringify(o)+"]"))}return s;case"number":case"string":case"boolean":return t}}(t,"$")}),"function"!=typeof exports.retrocycle&&(exports.retrocycle=function retrocycle($){var px=/^\$(?:\[(?:\d+|\"(?:[^\\\"\u0000-\u001f]|\\([\\\"\/bfnrt]|u[0-9a-zA-Z]{4}))*\")\])*$/;return function rez(value){var i,item,name,path;if(value&&"object"==typeof value)if("[object Array]"===Object.prototype.toString.apply(value))for(i=0;i<value.length;i+=1)item=value[i],item&&"object"==typeof item&&(path=item.$ref,"string"==typeof path&&px.test(path)?value[i]=eval(path):rez(item));else for(name in value)"object"==typeof value[name]&&(item=value[name],item&&(path=item.$ref,"string"==typeof path&&px.test(path)?value[name]=eval(path):rez(item)))}($),$})}("undefined"!=typeof exports?exports:window.JSON?window.JSON:window.JSON={})},{}],2:[function(t,e){var r=t("./json2"),n=t("./cycle");r.decycle=n.decycle,r.retrocycle=n.retrocycle,e.exports=r},{"./cycle":1,"./json2":3}],3:[function(require,module,exports){!function(JSON){function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var r,n,i,a,o,s=gap,l=e[t];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(t)),"function"==typeof rep&&(l=rep.call(e,t,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,o=[],"[object Array]"===Object.prototype.toString.apply(l)){for(a=l.length,r=0;a>r;r+=1)o[r]=str(r,l)||"null";return i=0===o.length?"[]":gap?"[\n"+gap+o.join(",\n"+gap)+"\n"+s+"]":"["+o.join(",")+"]",gap=s,i}if(rep&&"object"==typeof rep)for(a=rep.length,r=0;a>r;r+=1)"string"==typeof rep[r]&&(n=rep[r],i=str(n,l),i&&o.push(quote(n)+(gap?": ":":")+i));else for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(i=str(n,l),i&&o.push(quote(n)+(gap?": ":":")+i));return i=0===o.length?"{}":gap?"{\n"+gap+o.join(",\n"+gap)+"\n"+s+"}":"{"+o.join(",")+"}",gap=s,i}}"undefined"==typeof exports&&("function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null}),"function"!=typeof String.prototype.toJSON&&(String.prototype.toJSON=function(){return this.valueOf()}),"function"!=typeof Number.prototype.toJSON&&(Number.prototype.toJSON=function(){return this.valueOf()}),"function"!=typeof Boolean.prototype.toJSON&&(Boolean.prototype.toJSON=function(){return this.valueOf()}));var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,r){var n;if(gap="",indent="","number"==typeof r)for(n=0;r>n;n+=1)indent+=" ";else"string"==typeof r&&(indent=r);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var r,n,i=t[e];if(i&&"object"==typeof i)for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n=walk(i,r),void 0!==n?i[r]=n:delete i[r]);return reviver.call(t,e,i)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}("undefined"!=typeof exports?exports:window.JSON?window.JSON:window.JSON={})},{}],4:[function(t,e){function r(t){return t?n(t):void 0}function n(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},r.prototype.once=function(t,e){function r(){n.off(t,r),e.apply(this,arguments)}var n=this;return this._callbacks=this._callbacks||{},r.fn=e,this.on(t,r),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks[t];if(!r)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(var n,i=0;i<r.length;i++)if(n=r[i],n===e||n.fn===e){r.splice(i,1);break}return this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),r=this._callbacks[t];if(r){r=r.slice(0);for(var n=0,i=r.length;i>n;++n)r[n].apply(this,e)}return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},{}],5:[function(t,e){!function(t,r){"undefined"!=typeof e?e.exports=r():"function"==typeof define&&"object"==typeof define.amd?define(r):this[t]=r()}("domready",function(t){function e(t){for(d=1;t=n.shift();)t()}var r,n=[],i=!1,a=document,o=a.documentElement,s=o.doScroll,l="DOMContentLoaded",u="addEventListener",c="onreadystatechange",p="readyState",h=s?/^loaded|^c/:/^loaded|c/,d=h.test(a[p]);return a[u]&&a[u](l,r=function(){a.removeEventListener(l,r,i),e()},i),s&&a.attachEvent(c,r=function(){/^c/.test(a[p])&&(a.detachEvent(c,r),e())}),t=s?function(e){self!=top?d?e():n.push(e):function(){try{o.doScroll("left")}catch(r){return setTimeout(function(){t(e)},50)}e()}()}:function(t){d?t():n.push(t)}})},{}],6:[function(t,e,r){!function(t,n){"object"==typeof r?e.exports=n():"function"==typeof define&&define.amd?define(n):t.Spinner=n()}(this,function(){function t(t,e){var r,n=document.createElement(t||"div");for(r in e)n[r]=e[r];return n}function e(t){for(var e=1,r=arguments.length;r>e;e++)t.appendChild(arguments[e]);return t}function r(t,e,r,n){var i=["opacity",e,~~(100*t),r,n].join("-"),a=.01+r/n*100,o=Math.max(1-(1-t)/e*(100-a),t),s=u.substring(0,u.indexOf("Animation")).toLowerCase(),l=s&&"-"+s+"-"||"";return p[i]||(h.insertRule("@"+l+"keyframes "+i+"{0%{opacity:"+o+"}"+a+"%{opacity:"+t+"}"+(a+.01)+"%{opacity:1}"+(a+e)%100+"%{opacity:"+t+"}100%{opacity:"+o+"}}",h.cssRules.length),p[i]=1),i}function n(t,e){var r,n,i=t.style;for(e=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<c.length;n++)if(r=c[n]+e,void 0!==i[r])return r;return void 0!==i[e]?e:void 0}function i(t,e){for(var r in e)t.style[n(t,r)||r]=e[r];return t}function a(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)void 0===t[n]&&(t[n]=r[n])}return t}function o(t,e){return"string"==typeof t?t:t[e%t.length]}function s(t){this.opts=a(t||{},s.defaults,d)}function l(){function r(e,r){return t("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',r)}h.addRule(".spin-vml","behavior:url(#default#VML)"),s.prototype.lines=function(t,n){function a(){return i(r("group",{coordsize:c+" "+c,coordorigin:-u+" "+-u}),{width:c,height:c})}function s(t,s,l){e(h,e(i(a(),{rotation:360/n.lines*t+"deg",left:~~s}),e(i(r("roundrect",{arcsize:n.corners}),{width:u,height:n.width,left:n.radius,top:-n.width>>1,filter:l}),r("fill",{color:o(n.color,t),opacity:n.opacity}),r("stroke",{opacity:0}))))}var l,u=n.length+n.width,c=2*u,p=2*-(n.width+n.length)+"px",h=i(a(),{position:"absolute",top:p,left:p});if(n.shadow)for(l=1;l<=n.lines;l++)s(l,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(l=1;l<=n.lines;l++)s(l);return e(t,h)},s.prototype.opacity=function(t,e,r,n){var i=t.firstChild;n=n.shadow&&n.lines||0,i&&e+n<i.childNodes.length&&(i=i.childNodes[e+n],i=i&&i.firstChild,i=i&&i.firstChild,i&&(i.opacity=r))}}var u,c=["webkit","Moz","ms","O"],p={},h=function(){var r=t("style",{type:"text/css"});return e(document.getElementsByTagName("head")[0],r),r.sheet||r.styleSheet}(),d={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",position:"absolute"};s.defaults={},a(s.prototype,{spin:function(e){this.stop();var r=this,n=r.opts,a=r.el=i(t(0,{className:n.className}),{position:n.position,width:0,zIndex:n.zIndex});if(i(a,{left:n.left,top:n.top}),e&&e.insertBefore(a,e.firstChild||null),a.setAttribute("role","progressbar"),r.lines(a,r.opts),!u){var o,s=0,l=(n.lines-1)*(1-n.direction)/2,c=n.fps,p=c/n.speed,h=(1-n.opacity)/(p*n.trail/100),d=p/n.lines;!function f(){s++;for(var t=0;t<n.lines;t++)o=Math.max(1-(s+(n.lines-t)*d)%p*h,n.opacity),r.opacity(a,t*n.direction+l,o,n);r.timeout=r.el&&setTimeout(f,~~(1e3/c))}()}return r},stop:function(){var t=this.el;return t&&(clearTimeout(this.timeout),t.parentNode&&t.parentNode.removeChild(t),this.el=void 0),this},lines:function(n,a){function s(e,r){return i(t(),{position:"absolute",width:a.length+a.width+"px",height:a.width+"px",background:e,boxShadow:r,transformOrigin:"left",transform:"rotate("+~~(360/a.lines*c+a.rotate)+"deg) translate("+a.radius+"px,0)",borderRadius:(a.corners*a.width>>1)+"px"})}for(var l,c=0,p=(a.lines-1)*(1-a.direction)/2;c<a.lines;c++)l=i(t(),{position:"absolute",top:1+~(a.width/2)+"px",transform:a.hwaccel?"translate3d(0,0,0)":"",opacity:a.opacity,animation:u&&r(a.opacity,a.trail,p+c*a.direction,a.lines)+" "+1/a.speed+"s linear infinite"}),a.shadow&&e(l,i(s("#000","0 0 4px #000"),{top:"2px"})),e(n,e(l,s(o(a.color,c),"0 0 1px rgba(0,0,0,.1)")));return n},opacity:function(t,e,r){e<t.childNodes.length&&(t.childNodes[e].style.opacity=r)}});var f=i(t("group"),{behavior:"url(#default#VML)"});return!n(f,"transform")&&f.adj?l():u=n(f,"animation"),s})},{}],7:[function(t,e){function r(){}function n(t){var e={}.toString.call(t);switch(e){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function i(){if(v.XMLHttpRequest&&("file:"!=v.location.protocol||!v.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}return!1}function a(t){return t===Object(t)}function o(t){if(!a(t))return t;var e=[];for(var r in t)null!=t[r]&&e.push(encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e.join("&")}function s(t){for(var e,r,n={},i=t.split("&"),a=0,o=i.length;o>a;++a)r=i[a],e=r.split("="),n[decodeURIComponent(e[0])]=decodeURIComponent(e[1]);return n}function l(t){var e,r,n,i,a=t.split(/\r?\n/),o={};a.pop();for(var s=0,l=a.length;l>s;++s)r=a[s],e=r.indexOf(":"),n=r.slice(0,e).toLowerCase(),i=y(r.slice(e+1)),o[n]=i;return o}function u(t){return t.split(/ *; */).shift()}function c(t){return g(t.split(/ *; */),function(t,e){var r=e.split(/ *= */),n=r.shift(),i=r.shift();return n&&i&&(t[n]=i),t},{})}function p(t,e){e=e||{},this.req=t,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method?this.xhr.responseText:null,this.setStatusProperties(this.xhr.status),this.header=this.headers=l(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this.setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this.parseBody(this.text):null}function h(t,e){var r=this;f.call(this),this._query=this._query||[],this.method=t,this.url=e,this.header={},this._header={},this.on("end",function(){var t=null,e=null;try{e=new p(r)}catch(n){t=new Error("Parser is unable to parse the response"),t.parse=!0,t.original=n}r.callback(t,e)})}function d(t,e){return"function"==typeof e?new h("GET",t).end(e):1==arguments.length?new h("GET",t):new h(t,e)}var f=t("emitter"),g=t("reduce"),v="undefined"==typeof window?this:window,y="".trim?function(t){return t.trim()}:function(t){return t.replace(/(^\s*|\s*$)/g,"")};d.serializeObject=o,d.parseString=s,d.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},d.serialize={"application/x-www-form-urlencoded":o,"application/json":JSON.stringify},d.parse={"application/x-www-form-urlencoded":s,"application/json":JSON.parse},p.prototype.get=function(t){return this.header[t.toLowerCase()]},p.prototype.setHeaderProperties=function(){var t=this.header["content-type"]||"";this.type=u(t);var e=c(t);for(var r in e)this[r]=e[r]},p.prototype.parseBody=function(t){var e=d.parse[this.type];return e&&t&&t.length?e(t):null},p.prototype.setStatusProperties=function(t){var e=t/100|0;this.status=t,this.statusType=e,this.info=1==e,this.ok=2==e,this.clientError=4==e,this.serverError=5==e,this.error=4==e||5==e?this.toError():!1,this.accepted=202==t,this.noContent=204==t||1223==t,this.badRequest=400==t,this.unauthorized=401==t,this.notAcceptable=406==t,this.notFound=404==t,this.forbidden=403==t},p.prototype.toError=function(){var t=this.req,e=t.method,r=t.url,n="cannot "+e+" "+r+" ("+this.status+")",i=new Error(n);return i.status=this.status,i.method=e,i.url=r,i},d.Response=p,f(h.prototype),h.prototype.use=function(t){return t(this),this},h.prototype.timeout=function(t){return this._timeout=t,this},h.prototype.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},h.prototype.abort=function(){return this.aborted?void 0:(this.aborted=!0,this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this)},h.prototype.set=function(t,e){if(a(t)){for(var r in t)this.set(r,t[r]);return this}return this._header[t.toLowerCase()]=e,this.header[t]=e,this},h.prototype.unset=function(t){return delete this._header[t.toLowerCase()],delete this.header[t],this},h.prototype.getHeader=function(t){return this._header[t.toLowerCase()]},h.prototype.type=function(t){return this.set("Content-Type",d.types[t]||t),this},h.prototype.accept=function(t){return this.set("Accept",d.types[t]||t),this},h.prototype.auth=function(t,e){var r=btoa(t+":"+e);return this.set("Authorization","Basic "+r),this},h.prototype.query=function(t){return"string"!=typeof t&&(t=o(t)),t&&this._query.push(t),this},h.prototype.field=function(t,e){return this._formData||(this._formData=new FormData),this._formData.append(t,e),this},h.prototype.attach=function(t,e,r){return this._formData||(this._formData=new FormData),this._formData.append(t,e,r),this},h.prototype.send=function(t){var e=a(t),r=this.getHeader("Content-Type");if(e&&a(this._data))for(var n in t)this._data[n]=t[n];else"string"==typeof t?(r||this.type("form"),r=this.getHeader("Content-Type"),this._data="application/x-www-form-urlencoded"==r?this._data?this._data+"&"+t:t:(this._data||"")+t):this._data=t;return e?(r||this.type("json"),this):this},h.prototype.callback=function(t,e){var r=this._callback;return this.clearTimeout(),2==r.length?r(t,e):t?this.emit("error",t):void r(e)},h.prototype.crossDomainError=function(){var t=new Error("Origin is not allowed by Access-Control-Allow-Origin");t.crossDomain=!0,this.callback(t)},h.prototype.timeoutError=function(){var t=this._timeout,e=new Error("timeout of "+t+"ms exceeded");e.timeout=t,this.callback(e)},h.prototype.withCredentials=function(){return this._withCredentials=!0,this},h.prototype.end=function(t){var e=this,a=this.xhr=i(),o=this._query.join("&"),s=this._timeout,l=this._formData||this._data;if(this._callback=t||r,a.onreadystatechange=function(){return 4==a.readyState?0==a.status?e.aborted?e.timeoutError():e.crossDomainError():void e.emit("end"):void 0},a.upload&&(a.upload.onprogress=function(t){t.percent=t.loaded/t.total*100,e.emit("progress",t)}),s&&!this._timer&&(this._timer=setTimeout(function(){e.abort()},s)),o&&(o=d.serializeObject(o),this.url+=~this.url.indexOf("?")?"&"+o:"?"+o),a.open(this.method,this.url,!0),this._withCredentials&&(a.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof l&&!n(l)){var u=d.serialize[this.getHeader("Content-Type")];u&&(l=u(l))}for(var c in this.header)null!=this.header[c]&&a.setRequestHeader(c,this.header[c]);return this.emit("request",this),a.send(l),this},d.Request=h,d.get=function(t,e,r){var n=d("GET",t);return"function"==typeof e&&(r=e,e=null),e&&n.query(e),r&&n.end(r),n},d.head=function(t,e,r){var n=d("HEAD",t);return"function"==typeof e&&(r=e,e=null),e&&n.send(e),r&&n.end(r),n},d.del=function(t,e){var r=d("DELETE",t);return e&&r.end(e),r},d.patch=function(t,e,r){var n=d("PATCH",t);return"function"==typeof e&&(r=e,e=null),e&&n.send(e),r&&n.end(r),n},d.post=function(t,e,r){var n=d("POST",t);return"function"==typeof e&&(r=e,e=null),e&&n.send(e),r&&n.end(r),n},d.put=function(t,e,r){var n=d("PUT",t);return"function"==typeof e&&(r=e,e=null),e&&n.send(e),r&&n.end(r),n},e.exports=d},{emitter:8,reduce:9}],8:[function(t,e,r){arguments[4][4][0].apply(r,arguments)},{dup:4}],9:[function(t,e){e.exports=function(t,e,r){for(var n=0,i=t.length,a=3==arguments.length?r:t[n++];i>n;)a=e.call(null,a,t[n],++n,t);return a}},{}],10:[function(t,e){var r=t("./index"),n=t("./utils/each");e.exports=function(){var t,e,i=window.Keen||null,a=window._Keen||null;i&&a&&(t=a.clients||{},e=a.ready||[],n(t,function(t){n(r.prototype,function(t,e){i.prototype[e]=t}),n(["Query","Request","Dataset","Dataviz"],function(t){i[t]=r[t]?r[t]:function(){}}),t._config&&t.configure.call(t,t._config),t._setGlobalProperties&&n(t._setGlobalProperties,function(e){t.setGlobalProperties.apply(t,e)}),t._addEvent&&n(t._addEvent,function(e){t.addEvent.apply(t,e)});t._on||[];t._on&&(n(t._on,function(e){t.on.apply(t,e)}),t.trigger("ready")),n(["_config","_setGlobalProperties","_addEvent","_on"],function(e){if(t[e]){t[e]=void 0;try{delete t[e]}catch(r){}}})}),n(e,function(t){r.once("ready",t)})),window._Keen=void 0;try{delete window._Keen}catch(o){}}},{"./index":19,"./utils/each":31}],11:[function(t,e){var r=t("component-emitter");r.prototype.trigger=r.prototype.emit,e.exports=r},{"component-emitter":4}],12:[function(t,e){e.exports=function(){return"undefined"==typeof window?"server":"browser"}},{}],13:[function(t,e){var r=t("../utils/each"),n=t("JSON2");e.exports=function(t){var e=[];return r(t,function(t,r){"string"!=typeof t&&(t=n.stringify(t)),e.push(r+"="+encodeURIComponent(t))}),"?"+e.join("&")}},{"../utils/each":31,JSON2:2}],14:[function(t,e){e.exports=function(){return-60*(new Date).getTimezoneOffset()}},{}],15:[function(t,e){e.exports=function(){return"undefined"!=typeof window&&(-1!==navigator.userAgent.indexOf("MSIE")||navigator.appVersion.indexOf("Trident/")>0)?2e3:16e3}},{}],16:[function(t,e){e.exports=function(){var t="undefined"==typeof window?this:window;if(t.XMLHttpRequest&&("file:"!=t.location.protocol||!t.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}return!1}},{}],17:[function(t,e){e.exports=function(t,e,r){var n=r||function(){};if(e&&!e.ok){var i=e.body&&e.body.error_code;t=new Error(i?e.body.message:"Unknown error occurred"),t.code=i?e.body.error_code:"UnknownError"}t?n(t,null):n(null,e.body)}},{}],18:[function(t,e){function r(){var t=c();return t&&(t.open("GET",this.url,!1),t.send(null)),this}function n(){function t(){window[s]=void 0;try{delete window[s]}catch(t){}i.removeChild(n)}var e=this,r=(new Date).getTime(),n=document.createElement("script"),i=document.getElementsByTagName("head")[0],s="keenJSONPCallback",l=!1;for(s+=r;s in window;)s+="a";window[s]=function(r){l!==!0&&(l=!0,a.call(e,r),t())},n.src=e.url+"&jsonp="+s,i.appendChild(n),n.onreadystatechange=function(){l===!1&&"loaded"===e.readyState&&(l=!0,o.call(e),t())},n.onerror=function(){l===!1&&(l=!0,o.call(e),t())}}function i(){var t=this,e=document.createElement("img"),r=!1;e.onload=function(){if(r=!0,"naturalHeight"in this){if(this.naturalHeight+this.naturalWidth===0)return void this.onerror()}else if(this.width+this.height===0)return void this.onerror();a.call(t)},e.onerror=function(){r=!0,o.call(t)},e.src=t.url+"&c=clv1"}function a(t){var e=this.requestType.options.success,r="";if(l.call(this,e),t)try{r=JSON.stringify(t)}catch(n){}else r=e.responseText;this.xhr.responseText=r,this.xhr.status=e.status,this.emit("end")}function o(){var t=this.requestType.options.error;l.call(this,t),this.xhr.responseText=t.responseText,this.xhr.status=t.status,this.emit("end")}function s(){this.aborted=!0,this.clearTimeout(),this.emit("abort")}function l(t){return this.xhr={getAllResponseHeaders:function(){return""},getResponseHeader:function(){return"application/json"},responseText:t.responseText,status:t.status},this}var u=t("superagent"),c=(t("../utils/each"),t("./get-xhr-object"));e.exports=function(t,e){return function(a){var o=a.constructor.prototype.end;if("undefined"!=typeof window)return a.requestType=a.requestType||{},a.requestType.type=t,a.requestType.options=a.requestType.options||{async:!0,success:{responseText:'{ "created": true }',status:201},error:{responseText:'{ "error_code": "ERROR", "message": "Request failed" }',status:404}},e&&("boolean"==typeof e.async&&(a.requestType.options.async=e.async),e.success&&extend(a.requestType.options.success,e.success),e.error&&extend(a.requestType.options.error,e.error)),a.end=function(t){var e,a,l=this,c=this.requestType?this.requestType.type:"xhr";return"GET"===l.method&&"xhr"!==c||!l.requestType.options.async?(e=l._query.join("&"),a=l._timeout,l._callback=t||noop,a&&!l._timer&&(l._timer=setTimeout(function(){s.call(l)},a)),e&&(e=u.serializeObject(e),l.url+=~l.url.indexOf("?")?"&"+e:"?"+e),l.emit("request",l),l.requestType.options.async?"jsonp"===c?n.call(l):"beacon"===c&&i.call(l):r.call(l),l):void o.call(l,t)},a}}},{"../utils/each":31,"./get-xhr-object":16,superagent:7}],19:[function(t,e){function r(t){this.configure(t||{}),r.trigger("client",this)}var n=this,i=n.Keen,a=t("./helpers/emitter-shim");r.debug=!1,r.enabled=!0,r.loaded=!0,r.version="3.2.3",a(r),a(r.prototype),r.prototype.configure=function(t){var e=t||{};e.host&&e.host.replace(/.*?:\/\//g,""),e.protocol&&"auto"===e.protocol&&(e.protocol=location.protocol.replace(/:/g,"")),this.config={projectId:e.projectId,writeKey:e.writeKey,readKey:e.readKey,masterKey:e.masterKey,requestType:e.requestType||"jsonp",host:e.host||"api.keen.io/3.0",protocol:e.protocol||"https",globalProperties:null},r.debug&&this.on("error",r.log),this.trigger("ready")},r.prototype.projectId=function(t){return arguments.length?(this.config.projectId=t?String(t):null,this):this.config.projectId},r.prototype.masterKey=function(t){return arguments.length?(this.config.masterKey=t?String(t):null,this):this.config.masterKey},r.prototype.readKey=function(t){return arguments.length?(this.config.readKey=t?String(t):null,this):this.config.readKey},r.prototype.writeKey=function(t){return arguments.length?(this.config.writeKey=t?String(t):null,this):this.config.writeKey},r.prototype.url=function(t){return this.projectId()?this.config.protocol+"://"+this.config.host+"/projects/"+this.projectId()+t:void this.trigger("error","Client is missing projectId property")},r.log=function(t){r.debug&&"object"==typeof console&&console.log("[Keen IO]",t)},r.noConflict=function(){return n.Keen=i,r},r.ready=function(t){r.loaded?t():r.once("ready",t)},e.exports=r},{"./helpers/emitter-shim":11}],20:[function(t,e){function r(t,e){return t+=u({api_key:this.writeKey(),data:o.encode(n.stringify(e)),modified:(new Date).getTime()}),t.length<c()?t:!1}var n=t("JSON2"),i=t("superagent"),a=t("../index"),o=t("../utils/base64"),s=t("../utils/each"),l=t("../helpers/get-context"),u=t("../helpers/get-query-string"),c=t("../helpers/get-url-max-length"),p=t("../helpers/get-xhr-object"),h=t("../helpers/superagent-request-types"),d=t("../helpers/superagent-handle-response");e.exports=function(t,e,n,o){function u(t,e){d(t,e,w),w=n=null}function c(t){var e="Event not recorded: "+t;v.trigger("error",e),w&&(w.call(v,e,null),w=n=null)}var f,g,v=this,y=this.url("/events/"+t),m=this.config.requestType,b={},w=n;return f="boolean"==typeof o?o:!0,a.enabled?v.projectId()?v.writeKey()?t&&"string"==typeof t?(v.config.globalProperties&&(b=v.config.globalProperties(t)),s(e,function(t,e){b[e]=t}),p()||"xhr"!==m||(m="jsonp"),"xhr"===m&&f||(g=r.call(v,y,b)),void(g&&"browser"===l()?i.get(g).use(function(t){return t.async=f,t}).use(h(m)).end(u):p()||"server"===l()?i.post(y).set("Content-Type","application/json").set("Authorization",v.writeKey()).send(b).end(u):v.trigger("error","Request not sent: URL length exceeds current browser limit, and XHR (POST) is not supported."))):void c.call(v,"Collection name must be a string"):void c.call(v,"Missing writeKey property"):void c.call(v,"Missing projectId property"):void c.call(v,"Keen.enabled = false")
}},{"../helpers/get-context":12,"../helpers/get-query-string":13,"../helpers/get-url-max-length":15,"../helpers/get-xhr-object":16,"../helpers/superagent-handle-response":17,"../helpers/superagent-request-types":18,"../index":19,"../utils/base64":29,"../utils/each":31,JSON2:2,superagent:7}],21:[function(t,e){var r=t("../index"),n=t("superagent"),i=t("../utils/each"),a=t("../helpers/get-context"),o=t("../helpers/get-xhr-object"),s=(t("../helpers/superagent-request-types"),t("../helpers/superagent-handle-response"));e.exports=function(t,e){function l(t){var r="Events not recorded: "+t;u.trigger("error",r),h&&(h.call(u,r,null),h=e=null)}var u=this,c=this.url("/events"),p={},h=e;return r.enabled?u.projectId()?u.writeKey()?arguments.length>2?void l.call(u,"Incorrect arguments provided to #addEvents method"):"object"!=typeof t||t instanceof Array?void l.call(u,"Request payload must be an object"):(u.config.globalProperties?i(t,function(t,e){i(t,function(t){var r=u.config.globalProperties(e);i(t,function(t,e){r[e]=t}),p[e].push(r)})}):p=t,void(o()||"server"===a()?n.post(c).set("Content-Type","application/json").set("Authorization",u.writeKey()).send(p).end(function(t,r){s(t,r,h),h=e=null}):u.trigger("error","Events not recorded: XHR support is required for batch upload"))):void l.call(u,"Missing writeKey property"):void l.call(u,"Missing projectId property"):void l.call(u,"Keen.enabled = false")}},{"../helpers/get-context":12,"../helpers/get-xhr-object":16,"../helpers/superagent-handle-response":17,"../helpers/superagent-request-types":18,"../index":19,"../utils/each":31,superagent:7}],22:[function(t,e){var r=t("superagent"),n=t("../helpers/get-query-string"),i=t("../helpers/superagent-handle-response"),a=t("../helpers/superagent-request-types");e.exports=function(t,e,o,s){var l=this.config.requestType,u=e||{};"beacon"===l&&(l="jsonp"),u.api_key=u.api_key||o,r.get(t+n(u)).use(a(l)).end(function(t,e){i(t,e,s),s=null})}},{"../helpers/get-query-string":13,"../helpers/superagent-handle-response":17,"../helpers/superagent-request-types":18,superagent:7}],23:[function(t,e){var r=t("superagent"),n=t("../helpers/superagent-handle-response");e.exports=function(t,e,i,a){r.post(t).set("Content-Type","application/json").set("Authorization",i).send(e||{}).end(function(t,e){n(t,e,a),a=null})}},{"../helpers/superagent-handle-response":17,superagent:7}],24:[function(t,e){var r=t("../request");e.exports=function(t,e){var n,i=[],a=e;return t instanceof Array?i=t:i.push(t),n=new r(this,i,a).refresh(),a=e=null,n}},{"../request":28}],25:[function(t,e){e.exports=function(t){t&&"function"==typeof t?this.config.globalProperties=t:this.trigger("error","Invalid value for global properties: "+t)}},{}],26:[function(t,e){var r=t("./addEvent");e.exports=function(t,e,n,i,a){var o,s,l=t,u=l.currentTarget?l.currentTarget:l.srcElement||l.target,c=i||500,p=!1,h="";return void 0!==u.getAttribute?h=u.getAttribute("target"):u.target&&(h=u.target),"_blank"!=h&&"blank"!=h||l.metaKey||(s=window.open("about:blank"),s.document.location=u.href),"A"===u.nodeName?o=function(){p||l.metaKey||"_blank"===h||"blank"===h||(p=!0,window.location=u.href)}:"FORM"===u.nodeName?o=function(){p||(p=!0,u.submit())}:this.trigger("error","#trackExternalLink method not attached to an <a> or <form> DOM element"),a&&(o=function(){p||(p=!0,a())}),r.call(this,e,n,o),setTimeout(o,c),l.metaKey?void 0:!1}},{"./addEvent":20}],27:[function(t,e){function r(){this.configure.apply(this,arguments)}var n=t("./utils/each"),i=(t("./utils/extend"),t("./helpers/get-timezone-offset")),a=(t("./helpers/get-query-string"),t("./helpers/emitter-shim"));a(r.prototype),r.prototype.configure=function(t,e){return this.analysis=t,this.params=this.params||{},this.set(e),void 0===this.params.timezone&&(this.params.timezone=i()),this},r.prototype.set=function(t){var e=this;return n(t,function(t,r){var i=r,a=t;r.match(new RegExp("[A-Z]"))&&(i=r.replace(/([A-Z])/g,function(t){return"_"+t.toLowerCase()})),e.params[i]=a,a instanceof Array&&n(a,function(t,r){t instanceof Array==0&&"object"==typeof t&&n(t,function(t,n){if(n.match(new RegExp("[A-Z]"))){var a=n.replace(/([A-Z])/g,function(t){return"_"+t.toLowerCase()});delete e.params[i][r][n],e.params[i][r][a]=t}})})}),e},r.prototype.get=function(t){var e=t;return e.match(new RegExp("[A-Z]"))&&(e=e.replace(/([A-Z])/g,function(t){return"_"+t.toLowerCase()})),this.params?this.params[e]||null:void 0},r.prototype.addFilter=function(t,e,r){return this.params.filters=this.params.filters||[],this.params.filters.push({property_name:t,operator:e,property_value:r}),this},e.exports=r},{"./helpers/emitter-shim":11,"./helpers/get-query-string":13,"./helpers/get-timezone-offset":14,"./utils/each":31,"./utils/extend":32}],28:[function(t,e){function r(t,e,r){var n=r;this.config={timeout:3e5},this.configure(t,e,n),n=r=null}var n=t("./utils/each"),i=t("./utils/extend"),a=t("./utils/sendQuery"),o=t("./"),s=t("./helpers/emitter-shim");s(r.prototype),r.prototype.configure=function(t,e,r){var n=r;return i(this,{client:t,queries:e,data:{},callback:n}),n=r=null,this},r.prototype.timeout=function(t){return arguments.length?(this.config.timeout=isNaN(parseInt(t))?null:parseInt(t),this):this.config.timeout},r.prototype.refresh=function(){var t=this,e=0,r=[],i=!1,s=function(n,a,o){return n?(t.trigger("error",n),t.callback&&t.callback(n,null),void(i=!0)):(r[o]=a,e++,void(e!=t.queries.length||i||(t.data=1==t.queries.length?r[0]:r,t.trigger("complete",null,t.data),t.callback&&t.callback(null,t.data))))};return n(t.queries,function(e,r){var n,i=function(t,e){s(t,e,r)};if(e instanceof o.Query)n="/queries/"+e.analysis,a.call(t,n,e.params,i);else if("[object String]"===Object.prototype.toString.call(e))n="/saved_queries/"+encodeURIComponent(e)+"/result",a.call(t,n,null,i);else{var l={statusText:"Bad Request",responseText:{message:"Error: Query "+(+r+1)+" of "+t.queries.length+" for project "+t.client.projectId()+" is not a valid request"}};t.trigger("error",l.responseText.message),t.callback&&t.callback(l.responseText.message,null)}}),this},e.exports=r},{"./":19,"./helpers/emitter-shim":11,"./utils/each":31,"./utils/extend":32,"./utils/sendQuery":34}],29:[function(t,e){e.exports={map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(t){var e,r,n,i,a,o,s,l="",u=0,c=this.map;for(t=this.utf8.encode(t);u<t.length;)e=t.charCodeAt(u++),r=t.charCodeAt(u++),n=t.charCodeAt(u++),i=e>>2,a=(3&e)<<4|r>>4,o=isNaN(r)?64:(15&r)<<2|n>>6,s=isNaN(r)||isNaN(n)?64:63&n,l=l+c.charAt(i)+c.charAt(a)+c.charAt(o)+c.charAt(s);return l},decode:function(t){var e,r,n,i,a,o,s,l="",u=0,c=this.map,p=String.fromCharCode;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");u<t.length;)e=c.indexOf(t.charAt(u++)),r=c.indexOf(t.charAt(u++)),n=c.indexOf(t.charAt(u++)),i=c.indexOf(t.charAt(u++)),a=e<<2|r>>4,o=(15&r)<<4|n>>2,s=(3&n)<<6|i,l=l+(p(a)+(64!=n?p(o):""))+(64!=i?p(s):"");return this.utf8.decode(l)},utf8:{encode:function(t){for(var e,r="",n=0,i=String.fromCharCode;n<t.length;)e=t.charCodeAt(n++),r+=128>e?i(e):e>127&&2048>e?i(e>>6|192)+i(63&e|128):i(e>>12|224)+i(e>>6&63|128)+i(63&e|128);return r},decode:function(t){for(var e,r,n="",i=0,a=String.fromCharCode;i<t.length;)r=t.charCodeAt(i),n+=128>r?[a(r),i++][0]:r>191&&224>r?[a((31&r)<<6|63&(e=t.charCodeAt(i+1))),i+=2][0]:[a((15&r)<<12|(63&(e=t.charCodeAt(i+1)))<<6|63&(c3=t.charCodeAt(i+2))),i+=3][0];return n}}}},{}],30:[function(t,e){var r=t("JSON2");e.exports=function(t){return r.parse(r.stringify(t))}},{JSON2:2}],31:[function(t,e){e.exports=function(t,e,r){var n;if(!t)return 0;if(r=r?r:t,t instanceof Array){for(n=0;n<t.length;n++)if(e.call(r,t[n],n,t)===!1)return 0}else for(n in t)if(t.hasOwnProperty(n)&&e.call(r,t[n],n,t)===!1)return 0;return 1}},{}],32:[function(t,e){e.exports=function(t){for(var e=1;e<arguments.length;e++)for(var r in arguments[e])t[r]=arguments[e][r];return t}},{}],33:[function(t,e){function r(t){for(var e,r={},n=/\+/g,i=/([^&=]+)=?([^&]*)/g,a=function(t){return decodeURIComponent(t.replace(n," "))},o=t.split("?")[1];e=i.exec(o);)r[a(e[1])]=a(e[2]);return r}e.exports=r},{}],34:[function(t,e){var r=t("superagent"),n=t("../helpers/get-context"),i=t("../helpers/get-query-string"),a=t("../helpers/get-url-max-length"),o=t("../helpers/get-xhr-object"),s=t("../helpers/superagent-request-types"),l=t("../helpers/superagent-handle-response");e.exports=function(t,e,u){function c(t,e){l(t,e,d),d=u=null}var p=this,h=this.client.url(t),d=(this.client.config.requestType,u);return u=null,p.client.projectId()?p.client.readKey()?void(o()||"server"===n()?r.post(h).set("Content-Type","application/json").set("Authorization",p.client.readKey()).timeout(p.timeout()).send(e||{}).end(c):(extend(e,{api_key:p.client.readKey()}),h+=i(e),h.length<a()?r.get(h).timeout(p.timeout()).use(s("jsonp")).end(c):p.client.trigger("error","Query not sent: URL length exceeds current browser limit, and XHR (POST) is not supported."))):void p.client.trigger("error","Query not sent: Missing readKey property"):void p.client.trigger("error","Query not sent: Missing projectId property")}},{"../helpers/get-context":12,"../helpers/get-query-string":13,"../helpers/get-url-max-length":15,"../helpers/get-xhr-object":16,"../helpers/superagent-handle-response":17,"../helpers/superagent-request-types":18,superagent:7}],35:[function(t,e){function r(){this.data={input:{},output:[[]]},this.meta={schema:{},method:void 0},arguments.length>0&&this.parse.apply(this,arguments)}function n(t){var e,n,i=this,a=t||{},o=[],s=[];""!==a.records&&a.records?(n=a.records.split(r.defaults.delimeter),e=p.apply(i,[i.input()].concat(n))[0]):e=[i.input()],u(a.select,function(t){o.push(t.path.split(r.defaults.delimeter))}),0==o.length&&u(e,function(t){var e=c(t);for(var r in e)e.hasOwnProperty(r)&&-1==s.indexOf(r)&&(s.push(r),o.push([r]))});var l=[[]];return u(o,function(t){1==o.length?l[0].push("label","value"):l[0].push(t.join("."))}),u(e,function(t,e){var r=c(t);1==o.length?l.push([o.join("."),r[o.join(".")]]):(l.push([]),u(o,function(t){var n=t.join(".");l[e+1].push(r[n])}))}),i.output(l),i.format(a.select),i}function i(t){var e=this,n=[],i=t.unpack.value?t.unpack.value.path.split(r.defaults.delimeter):!1,a=t.unpack.label?t.unpack.label.path.split(r.defaults.delimeter):!1,o=t.unpack.index?t.unpack.index.path.split(r.defaults.delimeter):!1,s=""!==i[i.length-1]?i[i.length-1]:"Value",l=""!==a[a.length-1]?a[a.length-1]:"Label",c=""!==o[o.length-1]?o[o.length-1]:"Index",h=function(){var n;return n=""==t.records?[e.input()]:p.apply(e,[e.input()].concat(t.records.split(r.defaults.delimeter))),n[0]}();return h instanceof Array==0&&(h=[h]),u(h,function(t){var r=a?p.apply(e,[t].concat(a)):[];r&&(n=r)}),u(h,function(t,r){var a=i?p.apply(e,[t].concat(i)):!1,d=o?p.apply(e,[t].concat(o)):!1;d?u(d,function(){e.data.output.push([])}):e.data.output.push([]),d&&(0==r&&(e.data.output[0].push(c),n.length>0?u(n,function(t){e.data.output[0].push(t)}):e.data.output[0].push(s)),h.length<e.data.output.length-1?0==r&&u(e.data.output,function(t,r){r>0&&e.data.output[r].push(d[r-1])}):e.data.output[r+1].push(d[0])),!d&&n.length>0&&(0==r&&(e.data.output[0].push(l),e.data.output[0].push(s)),e.data.output[r+1].push(n[0])),d||0!=n.length||e.data.output[0].push(""),a?h.length<e.data.output.length-1?0==r&&u(e.data.output,function(t,r){r>0&&e.data.output[r].push(a[r-1])}):u(a,function(t){e.data.output[r+1].push(t)}):u(e.data.output[0],function(t,n){var i=d?0:-1;n>i&&e.data.output[r+1].push(null)})}),e.format(t.unpack),this}function a(t){return u(t.unpack,function(e,r){e&&o(e,"string")&&(t.unpack[r]={path:t.unpack[r]})}),t}function o(t,e){return t=typeof t,e?t==e:"undefined"!=t}function s(t,e){return u(e,function(e,r){o(t[r],"object")&&o(e,"object")?t[r]=s(t[r],e):null!==e&&(t[r]=e)}),t}var l=t("../core/utils/clone"),u=t("../core/utils/each"),c=t("./utils/flatten"),p=t("./utils/parse"),h=t("../core/helpers/emitter-shim");r.defaults={delimeter:" -> "},h(r),h(r.prototype),r.prototype.input=function(t){return arguments.length?(this.data.input=t?l(t):null,this):this.data.input},r.prototype.output=function(t){return arguments.length?(this.data.output=t instanceof Array?t:null,this):this.data.output},r.prototype.method=function(t){return arguments.length?(this.meta.method=t?String(t):null,this):this.meta.method},r.prototype.schema=function(t){return arguments.length?(this.meta.schema=t?t:null,this):this.meta.schema},r.prototype.parse=function(t,e){var r;return t&&this.input(t),e&&this.schema(e),this.output([[]]),this.meta.schema.select?(this.method("select"),r=s({records:"",select:!0},this.schema()),n.call(this,a(r))):this.meta.schema.unpack&&(this.method("unpack"),r=s({records:"",unpack:{index:!1,value:!1,label:!1}},this.schema()),i.call(this,a(r))),this},e.exports=r},{"../core/helpers/emitter-shim":11,"../core/utils/clone":30,"../core/utils/each":31,"./utils/flatten":46,"./utils/parse":47}],36:[function(t,e){var r=t("../core/utils/extend"),n=t("./dataset");r(n.prototype,t("./lib/append")),r(n.prototype,t("./lib/delete")),r(n.prototype,t("./lib/filter")),r(n.prototype,t("./lib/insert")),r(n.prototype,t("./lib/select")),r(n.prototype,t("./lib/sort")),r(n.prototype,t("./lib/update")),r(n.prototype,t("./lib/analyses")),r(n.prototype,{format:t("./lib/format")}),e.exports=n},{"../core/utils/extend":32,"./dataset":35,"./lib/analyses":37,"./lib/append":38,"./lib/delete":39,"./lib/filter":40,"./lib/format":41,"./lib/insert":42,"./lib/select":43,"./lib/sort":44,"./lib/update":45}],37:[function(t,e){var r=t("../../core/utils/each"),n=["Average","Maximum","Minimum","Sum"],i={};i.average=function(t,e,n){var i=t.slice(e||0,n?n+1:t.length),a=0;return r(i,function(t){"number"!=typeof t||isNaN(parseFloat(t))||(a+=parseFloat(t))}),a/i.length},i.maximum=function(t,e,n){var i=t.slice(e||0,n?n+1:t.length),a=[];return r(i,function(t){"number"!=typeof t||isNaN(parseFloat(t))||a.push(parseFloat(t))}),Math.max.apply(Math,a)},i.minimum=function(t,e,n){var i=t.slice(e||0,n?n+1:t.length),a=[];return r(i,function(t){"number"!=typeof t||isNaN(parseFloat(t))||a.push(parseFloat(t))}),Math.min.apply(Math,a)},i.sum=function(t,e,n){var i=t.slice(e||0,n?n+1:t.length),a=0;return r(i,function(t){"number"!=typeof t||isNaN(parseFloat(t))||(a+=parseFloat(t))}),a},r(n,function(t){i["getColumn"+t]=i["getRow"+t]=function(e){return this[t.toLowerCase()](e,1)}}),i.getColumnLabel=i.getRowIndex=function(t){return t[0]},e.exports=i},{"../../core/utils/each":31}],38:[function(t,e){function r(t,e){var r=this,n=(Array.prototype.slice.call(arguments,2),void 0!==t?t:null);return"function"==typeof e?(r.data.output[0].push(n),i(r.output(),function(t,n){var i;n>0&&(i=e.call(r,t,n),"undefined"==typeof i&&(i=null),r.data.output[n].push(i))})):(!e||e instanceof Array)&&(r.data.output[0].push(n),i(r.output(),function(t,n){var i;n>0&&(i=e&&void 0!==e[n-1]?e[n-1]:null,r.data.output[n].push(i))})),r}function n(t,e){var r=this,n=(Array.prototype.slice.call(arguments,2),void 0!==t?t:null),a=[];return a.push(n),"function"==typeof e?(i(r.output()[0],function(t,n){var i,o;n>0&&(i=r.selectColumn(n),o=e.call(r,i,n),"undefined"==typeof o&&(o=null),a.push(o))}),r.data.output.push(a)):(!e||e instanceof Array)&&(i(r.output()[0],function(t,r){var n;r>0&&(n=e&&void 0!==e[r-1]?e[r-1]:null,a.push(n))}),this.data.output.push(a)),this}var i=t("../../core/utils/each");e.exports={appendColumn:r,appendRow:n}},{"../../core/utils/each":31}],39:[function(t,e){function r(t){var e=this,r=isNaN(parseInt(t))?this.output()[0].indexOf(t):t;return r>-1&&i(e.data.output,function(t,n){e.data.output[n].splice(r,1)}),e}function n(t){var e=isNaN(parseInt(t))?this.selectColumn(0).indexOf(t):t;return e>-1&&this.data.output.splice(e,1),this}var i=t("../../core/utils/each");e.exports={deleteColumn:r,deleteRow:n}},{"../../core/utils/each":31}],40:[function(t,e){function r(t){var e=this,r=new Array;return i(e.data.output,function(){r.push([])}),i(e.data.output[0],function(n,a){var o=e.selectColumn(a);(0==a||t.call(e,o,a))&&i(o,function(t,e){r[e].push(t)})}),e.output(r),e}function n(t){var e=this,r=[];return i(e.output(),function(n,i){(0==i||t.call(e,n,i))&&r.push(n)}),e.output(r),e}var i=t("../../core/utils/each");e.exports={filterColumns:r,filterRows:n}},{"../../core/utils/each":31}],41:[function(t,e){function r(t,e){var r=t,i=e||{};return i.replace&&n(i.replace,function(t,e){(r==e||String(r)==String(e)||parseFloat(r)==parseFloat(e))&&(r=t)}),i.type&&"date"==i.type&&(r=i.format&&moment&&moment(t).isValid()?moment(r).format(i.format):new Date(r)),i.type&&"string"==i.type&&(r=String(r)),i.type&&"number"==i.type&&!isNaN(parseFloat(r))&&(r=parseFloat(r)),r}var n=t("../../core/utils/each");e.exports=function(t){var e=this;return"select"===this.method()&&n(e.output(),function(i,a){0==a?n(i,function(r,n){t[n]&&t[n].label&&(e.data.output[a][n]=t[n].label)}):n(i,function(n,i){e.data.output[a][i]=r(e.data.output[a][i],t[i])})}),"unpack"===this.method()&&(t.index&&n(e.output(),function(n,i){0==i?t.index.label&&(e.data.output[i][0]=t.index.label):e.data.output[i][0]=r(e.data.output[i][0],t.index)}),t.label&&(t.index?n(e.output(),function(i,a){n(i,function(n,i){0==a&&i>0&&(e.data.output[a][i]=r(e.data.output[a][i],t.label))})}):n(e.output(),function(n,i){i>0&&(e.data.output[i][0]=r(e.data.output[i][0],t.label))})),t.value&&(t.index?n(e.output(),function(i,a){n(i,function(n,i){a>0&&i>0&&(e.data.output[a][i]=r(e.data.output[a][i],t.value))})}):n(e.output(),function(i,a){n(i,function(n,i){a>0&&(e.data.output[a][i]=r(e.data.output[a][i],t.value))})}))),e}},{"../../core/utils/each":31}],42:[function(t,e){function r(t,e,r){var n,a=this;return n=void 0!==e?e:null,"function"==typeof r?(a.data.output[0].splice(t,0,n),i(a.output(),function(e,n){var i;n>0&&(i=r.call(a,e,n),"undefined"==typeof i&&(i=null),a.data.output[n].splice(t,0,i))})):(!r||r instanceof Array)&&(a.data.output[0].splice(t,0,n),i(a.output(),function(e,n){var i;n>0&&(i=r&&"undefined"!==r[n-1]?r[n-1]:null,a.data.output[n].splice(t,0,i))})),a}function n(t,e,r){var n,a=this,o=[];return n=void 0!==e?e:null,o.push(n),"function"==typeof r?(i(a.output()[0],function(t,e){var n,i;e>0&&(n=a.selectColumn(e),i=r.call(a,n,e),"undefined"==typeof i&&(i=null),o.push(i))}),a.data.output.splice(t,0,o)):(!r||r instanceof Array)&&(i(a.output()[0],function(t,e){var n;e>0&&(n=r&&void 0!==r[e-1]?r[e-1]:null,o.push(n))}),this.data.output.splice(t,0,o)),this}var i=t("../../core/utils/each");e.exports={insertColumn:r,insertRow:n}},{"../../core/utils/each":31}],43:[function(t,e){function r(t){var e=new Array,r=isNaN(parseInt(t))?this.output()[0].indexOf(t):t;return r>-1&&i(this.data.output,function(t){e.push(t[r])}),e}function n(t){var e=isNaN(parseInt(t))?this.selectColumn(0).indexOf(t):t;return e>-1?this.data.output[e]:void 0}var i=t("../../core/utils/each");e.exports={selectColumn:r,selectRow:n}},{"../../core/utils/each":31}],44:[function(t,e){function r(t,e){var r=this,n=this.output()[0].slice(1),a=[],o=e||this.getColumnLabel;return i(n,function(t,e){a.push(r.selectColumn(e+1).slice(0))}),a.sort(function(e,n){var i=o.call(r,e)>o.call(r,n);return i?"asc"===t?1:-1:i?0:"asc"===t?-1:1}),i(a,function(t,e){r.deleteColumn(e+1).insertColumn(e+1,t[0],t.slice(1))}),r}function n(t,e){var r=this,n=this.output().slice(0,1),i=this.output().slice(1),a=e||this.getRowIndex;return i.sort(function(e,n){var i=a.call(r,e)>a.call(r,n);return i?"asc"===t?1:-1:i?0:"asc"===t?-1:1}),r.output(n.concat(i)),r}var i=t("../../core/utils/each");e.exports={sortColumns:r,sortRows:n}},{"../../core/utils/each":31}],45:[function(t,e){function r(t,e){var r,n=this;return r=isNaN(parseInt(t))?this.output()[0].indexOf(t):t,r>-1&&("function"==typeof e?i(n.output(),function(t,i){var a;i>0&&(a=e.call(n,t[r],i,t),"undefined"!=typeof a&&(n.data.output[i][r]=a))}):(!e||e instanceof Array)&&i(n.output(),function(t,i){var a;i>0&&(a=e&&"undefined"!=typeof e[i-1]?e[i-1]:null,n.data.output[i][r]=a)})),n}function n(t,e){var r,n=this;return r=isNaN(parseInt(t))?this.selectColumn(0).indexOf(t):t,r>-1&&("function"==typeof e?i(n.output()[r],function(t,i){var a=n.selectColumn(i),o=e.call(n,t,i,a);"undefined"!=typeof o&&(n.data.output[r][i]=o)}):(!e||e instanceof Array)&&i(n.output()[r],function(t,i){var a;i>0&&(a=e&&void 0!==e[i-1]?e[i-1]:null,n.data.output[r][i]=a)})),n}var i=t("../../core/utils/each");e.exports={updateColumn:r,updateRow:n}},{"../../core/utils/each":31}],46:[function(t,e){function r(t){var e={};for(var n in t)if(t.hasOwnProperty(n))if("object"==typeof t[n]&&null!==t[n]){var i=r(t[n]);for(var a in i)i.hasOwnProperty(a)&&(e[n+"."+a]=i[a])}else e[n]=t[n];return e}e.exports=r},{}],47:[function(t,e){var r=t("../../core/utils/each");e.exports=function(){var t=[],e=function(){var n=arguments[0],i=Array.prototype.slice.call(arguments,1),a=i.pop();return 0===i.length&&(n instanceof Array?i=n:"object"==typeof n&&i.push(n)),r(i,function(o){if(""==a&&("number"==typeof o||null==o))return t.push(o);if(o[a]||0===o[a]||void 0!==o[a])return t.push(null===o[a]?null:o[a]);if(!n[o]){if("object"!=typeof n||n instanceof Array!=!1||n[a])return e.apply(this,[o].concat(i.splice(1)).concat(a));throw new Error("Target property does not exist",a)}return n[o]instanceof Array?void r(n[o],function(t,r){var s=[n[o]].concat(n[o][r]).concat(i.slice(1)).concat(a);return e.apply(this,s)}):n[o][a]?t.push(n[o][a]):e.apply(this,[n[o]].concat(i.splice(1)).concat(a))}),t.length>0?t:void 0};return e.apply(this,arguments)}},{"../../core/utils/each":31}],48:[function(t,e){var r=t("../dataviz"),n=t("../../core/utils/each"),i=t("../../core/utils/extend");e.exports=function(){function t(t){var e={axis:{},bindto:this.el(),data:{columns:[]},color:{pattern:this.colors()},size:{height:this.height(),width:this.width()}};return e.data.type=t,"gauge"===t||("pie"===t||"donut"===t?e[t]={title:this.title()}:(this.dataType().indexOf("chron")>-1?(e.data.x="x",e.axis.x={type:"timeseries",tick:{format:"%Y-%m-%d"}}):"cat-ordinal"===this.dataType()&&(e.axis.x={type:"category",categories:this.labels()}),this.title()&&(e.axis.y={label:this.title()}))),i(e,this.chartOptions())}function e(){this.view._artifacts.c3&&(this.view._artifacts.c3.destroy(),this.view._artifacts.c3=null)}var a={singular:["gauge"],categorical:["donut","pie"],"cat-interval":["area-step","step","bar","area","area-spline","spline","line"],"cat-ordinal":["bar","area","area-spline","spline","line","step","area-step"],chronological:["area","area-spline","spline","line","bar","step","area-step"],"cat-chronological":["line","spline","area","area-spline","bar","step","area-step"]},o={};n(["gauge","donut","pie","bar","area","area-spline","spline","line","step","area-step"],function(r){o[r]={render:function(){var e=t.call(this,r);this.view._artifacts.c3=c3.generate(e),this.update()},update:function(){var t=this,e=[];"gauge"===r?t.view._artifacts.c3.load({columns:[[t.title(),t.data()[1][1]]]}):"pie"===r||"donut"===r?t.view._artifacts.c3.load({columns:t.dataset.data.output.slice(1)}):(this.dataType().indexOf("chron")>-1&&(e.push(t.dataset.selectColumn(0)),e[0][0]="x"),n(t.data()[0],function(r,n){n>0&&e.push(t.dataset.selectColumn(n))}),t.stacked()&&t.view._artifacts.c3.groups([t.labels()]),t.view._artifacts.c3.load({columns:e}))},destroy:function(){e.call(this)}}}),r.register("c3",o,{capabilities:a})}},{"../../core/utils/each":31,"../../core/utils/extend":32,"../dataviz":52}],49:[function(t,e){var r=t("../dataviz"),n=t("../../core/utils/each"),i=t("../../core/utils/extend");e.exports=function(){function t(){var t=this,e=[];return n(t.dataset.selectColumn(0).slice(1),function(r,n){e.push({value:t.dataset.selectColumn(1).slice(1)[n],color:t.colors()[+n],hightlight:t.colors()[+n+9],label:r})}),e}function e(){var t,e=this,r={labels:[],datasets:[]};return t=this.dataset.selectColumn(0).slice(1),n(t,function(t){r.labels.push(t instanceof Date?t.getMonth()+1+"-"+t.getDate()+"-"+t.getFullYear():t)}),n(e.dataset.selectRow(0).slice(1),function(t,n){var i={r:o(e.colors()[n]),g:s(e.colors()[n]),b:l(e.colors()[n])};r.datasets.push({label:t,fillColor:"rgba("+i.r+","+i.g+","+i.b+",0.2)",strokeColor:"rgba("+i.r+","+i.g+","+i.b+",1)",pointColor:"rgba("+i.r+","+i.g+","+i.b+",1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba("+i.r+","+i.g+","+i.b+",1)",data:e.dataset.selectColumn(+n+1).slice(1)})}),r}function a(){this.view._artifacts.chartjs&&(this.view._artifacts.chartjs.destroy(),this.view._artifacts.chartjs=null)}function o(t){return parseInt(u(t).substring(0,2),16)}function s(t){return parseInt(u(t).substring(2,4),16)}function l(t){return parseInt(u(t).substring(4,6),16)}function u(t){return"#"==t.charAt(0)?t.substring(1,7):t}"undefined"!=typeof Chart&&(Chart.defaults.global.responsive=!0);var c={categorical:["doughnut","pie","polar-area","radar"],"cat-interval":["bar","line"],"cat-ordinal":["bar","line"],chronological:["line","bar"],"cat-chronological":["line","bar"]},p={radar:"Radar","polar-area":"PolarArea",pie:"Pie",doughnut:"Doughnut",line:"Line",bar:"Bar"},h={doughnut:t,pie:t,"polar-area":t,radar:e,line:e,bar:e},d={};n(["doughnut","pie","polar-area","radar","bar","line"],function(t){d[t]={initialize:function(){if("canvas"!==this.el().nodeName.toLowerCase()){var t=document.createElement("canvas");this.el().innerHTML="",this.el().appendChild(t),this.view._artifacts.ctx=t.getContext("2d")}else this.view._artifacts.ctx=this.el().getContext("2d");return this},render:function(){var e=p[t],r=i({},this.chartOptions()),n=h[t].call(this);return this.view._artifacts.chartjs&&this.view._artifacts.chartjs.destroy(),this.view._artifacts.chartjs=new Chart(this.view._artifacts.ctx)[e](n,r),this},destroy:function(){a.call(this)}}}),r.register("chartjs",d,{capabilities:c})}},{"../../core/utils/each":31,"../../core/utils/extend":32,"../dataviz":52}],50:[function(t,e){var r=t("../dataviz"),n=t("../../core/utils/each"),i=t("../../core/utils/extend"),a=t("../../core");e.exports=function(){function t(t){var e=o[t.message]||t.message||"An error occurred";this.error(e)}function e(t){var e={};switch(t.toLowerCase()){case"areachart":e.lineWidth=2,e.hAxis={baselineColor:"transparent",gridlines:{color:"transparent"}},e.vAxis={viewWindow:{min:0}},"chronological"===this.dataType()&&(e.legend={position:"none"},e.chartArea={width:"85%"});break;case"barchart":e.hAxis={viewWindow:{min:0}},e.vAxis={baselineColor:"transparent",gridlines:{color:"transparent"}},"chronological"===this.dataType()&&(e.legend={position:"none"});break;case"columnchart":e.hAxis={baselineColor:"transparent",gridlines:{color:"transparent"}},e.vAxis={viewWindow:{min:0}},"chronological"===this.dataType()&&(e.legend={position:"none"},e.chartArea={width:"85%"});break;case"linechart":e.lineWidth=2,e.hAxis={baselineColor:"transparent",gridlines:{color:"transparent"}},e.vAxis={viewWindow:{min:0}},"chronological"===this.dataType()&&(e.legend={position:"none"},e.chartArea={width:"85%"});break;case"piechart":e.sliceVisibilityThreshold=.01;break;case"table":}return e}a.loaded=!1;var o={"Data column(s) for axis #0 cannot be of type string":"No results to visualize"},s=["AreaChart","BarChart","ColumnChart","LineChart","PieChart","Table"],l={},u={categorical:["piechart","barchart","columnchart","table"],"cat-interval":["columnchart","barchart","table"],"cat-ordinal":["barchart","columnchart","areachart","linechart","table"],chronological:["areachart","linechart","table"],"cat-chronological":["linechart","columnchart","barchart","areachart"],nominal:["table"],extraction:["table"]};n(s,function(r){var n=r.toLowerCase();l[n]={initialize:function(){},render:function(){if("undefined"==typeof google)return void this.error("The Google Charts library could not be loaded.");var e=this;e.view._artifacts.googlechart&&this.destroy(),e.view._artifacts.googlechart=e.view._artifacts.googlechart||new google.visualization[r](e.el()),google.visualization.events.addListener(e.view._artifacts.googlechart,"error",function(r){t.call(e,r)}),this.update()},update:function(){var t=e.call(this,r);i(t,this.chartOptions(),this.attributes()),t.isStacked=this.stacked()||t.isStacked,this.view._artifacts.datatable=google.visualization.arrayToDataTable(this.data()),this.view._artifacts.googlechart&&this.view._artifacts.googlechart.draw(this.view._artifacts.datatable,t)},destroy:function(){this.view._artifacts.googlechart&&(google.visualization.events.removeAllListeners(this.view._artifacts.googlechart),this.view._artifacts.googlechart.clearChart(),this.view._artifacts.googlechart=null,this.view._artifacts.datatable=null)}}}),r.register("google",l,{capabilities:u,dependencies:[{type:"script",url:"https://www.google.com/jsapi",cb:function(t){"undefined"==typeof google?(this.trigger("error","Problem loading Google Charts library. Please contact us!"),t()):google.load("visualization","1.1",{packages:["corechart","table"],callback:function(){t()}})}}]})}},{"../../core":19,"../../core/utils/each":31,"../../core/utils/extend":32,"../dataviz":52}],51:[function(t,e){var r=t("../../core"),n=(t("../dataviz"),t("../../core/utils/clone")),i=t("../../core/utils/each"),a=t("../../core/utils/extend"),o=t("../utils/prettyNumber");e.exports=function(){var t,e,s;r.Error={defaults:{backgroundColor:"",borderRadius:"4px",color:"#ccc",display:"block",fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif",fontSize:"21px",fontWeight:"light",textAlign:"center"}},r.Spinner.defaults={lines:10,length:8,width:3,radius:10,corners:1,rotate:0,direction:1,color:"#4d4d4d",speed:1.67,trail:60,shadow:!1,hwaccel:!1,className:"keen-spinner",zIndex:2e9,top:"50%",left:"50%"};var l={singular:["metric"]};t={initialize:function(){var t=document.createElement("style"),e="#49c5b1";t.id="keen-widgets",t.type="text/css",t.innerHTML="  .keen-metric { \n  background: "+e+"; \n  border-radius: 4px; \n  color: #fff; \n  font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; \n  padding: 10px 0; \n  text-align: center; \n}   .keen-metric-value { \n  display: block; \n  font-size: 84px; \n  font-weight: 700; \n  line-height: 84px; \n}   .keen-metric-title { \n  display: block; \n  font-size: 24px; \n  font-weight: 200; \n}",document.getElementById(t.id)||document.body.appendChild(t)},render:function(){var t=1==this.colors().length?this.colors()[0]:"#49c5b1",e=this.title()||"Result",r=this.data()[1][1]||0,n=this.width(),i=this.chartOptions()||{},a="",s="",l={width:n?n+"px":"auto"},u=r;("undefined"==typeof i.prettyNumber||1==i.prettyNumber)&&(isNaN(parseInt(r))||(u=o(r))),i.prefix&&(a='<span class="keen-metric-prefix">'+i.prefix+"</span>"),i.suffix&&(s='<span class="keen-metric-suffix">'+i.suffix+"</span>"),this.el().innerHTML='<div class="keen-widget keen-metric" style="background-color: '+t+"; width:"+l.width+';" title="'+r+'"><span class="keen-metric-value">'+a+u+s+'</span><span class="keen-metric-title">'+e+"</span></div>"}},e={initialize:function(){},render:function(t,e){var o,s,l=n(r.Error.defaults),u=a(l,e);o=document.createElement("div"),o.className="keen-error",i(u,function(t,e){o.style[e]=t}),o.style.height=String(this.height()+"px"),o.style.paddingTop=this.height()/2-15+"px",o.style.width=String(this.width()+"px"),s=document.createElement("span"),s.innerHTML=t||"Yikes! An error occurred!",o.appendChild(s),this.el().innerHTML="",this.el().appendChild(o)},destroy:function(){this.el().innerHTML=""}},s={initialize:function(){},render:function(){var t=document.createElement("div");t.className="keen-loading",t.style.height=String(this.height()+"px"),t.style.position="relative",t.style.width=String(this.width()+"px"),this.el().innerHTML="",this.el().appendChild(t),this.view._artifacts.spinner=new r.Spinner(r.Spinner.defaults).spin(t)},destroy:function(){this.view._artifacts.spinner.stop(),this.view._artifacts.spinner=null}},r.Dataviz.register("keen-io",{metric:t,error:e,spinner:s},{capabilities:l})}},{"../../core":19,"../../core/utils/clone":30,"../../core/utils/each":31,"../../core/utils/extend":32,"../dataviz":52,"../utils/prettyNumber":91}],52:[function(t,e){function r(){this.dataset=new c,this.view={_prepared:!1,_initialized:!1,_rendered:!1,_artifacts:{},adapter:{library:void 0,chartOptions:{},chartType:void 0,defaultChartType:void 0,dataType:void 0},attributes:n(r.defaults),defaults:n(r.defaults),el:void 0,loader:{library:"keen-io",chartType:"spinner"}},r.visuals.push(this)
}var n=t("../core/utils/clone"),i=t("../core/utils/each"),a=t("../core/utils/extend"),o=t("./utils/loadScript"),s=t("./utils/loadStyle"),l=t("../core"),u=t("../core/helpers/emitter-shim"),c=t("../dataset");a(r,{dataTypeMap:{singular:{library:"keen-io",chartType:"metric"},categorical:{library:"google",chartType:"piechart"},"cat-interval":{library:"google",chartType:"columnchart"},"cat-ordinal":{library:"google",chartType:"barchart"},chronological:{library:"google",chartType:"areachart"},"cat-chronological":{library:"google",chartType:"linechart"},extraction:{library:"google",chartType:"table"},nominal:{library:"google",chartType:"table"}},defaults:{colors:["#00bbde","#fe6672","#eeb058","#8a8ad6","#ff855c","#00cfbb","#5a9eed","#73d483","#c879bb","#0099b6","#d74d58","#cb9141","#6b6bb6","#d86945","#00aa99","#4281c9","#57b566","#ac5c9e","#27cceb","#ff818b","#f6bf71","#9b9be1","#ff9b79","#26dfcd","#73aff4","#87e096","#d88bcb"],indexBy:"timeframe.start",stacked:!1},dependencies:{loading:0,loaded:0,urls:{}},libraries:{},visuals:[]}),u(r),u(r.prototype),r.register=function(t,e,n){var a=this,u=function(t){t.loaded++,t.loaded===t.loading&&(l.loaded=!0,l.trigger("ready"))};r.libraries[t]=r.libraries[t]||{},i(e,function(e,n){r.libraries[t][n]=e}),n&&n.capabilities&&(r.libraries[t]._defaults=r.libraries[t]._defaults||{},i(n.capabilities,function(e,n){r.libraries[t]._defaults[n]=e})),n&&n.dependencies&&i(n.dependencies,function(t){var e=r.dependencies;if(!e.urls[t.url]){e.urls[t.url]=!0,e.loading++;var n="script"===t.type?o:s;n(t.url,function(){t.cb?t.cb.call(a,function(){u(e)}):u(e)})}})},r.find=function(t){if(!arguments.length)return r.visuals;var e,n=t.nodeName?t:document.querySelector(t);return i(r.visuals,function(t){return n==t.el()?(e=t,!1):void 0}),e?e:void 0},e.exports=r},{"../core":19,"../core/helpers/emitter-shim":11,"../core/utils/clone":30,"../core/utils/each":31,"../core/utils/extend":32,"../dataset":36,"./utils/loadScript":89,"./utils/loadStyle":90}],53:[function(t,e){var r=t("../../core/utils/clone"),n=t("../../core/utils/extend"),i=t("../dataviz"),a=t("../../core/request");e.exports=function(t,e,o){var s=r(i.defaults),l=new i,u=new a(this,[t]),c=o?r(o):{};return c.chartType&&(l.chartType(c.chartType),delete c.chartType),c.library&&(l.library(c.library),delete c.library),c.chartOptions&&(l.chartOptions(c.chartOptions),delete c.chartOptions),l.attributes(n(s,c)).el(e).prepare(),u.refresh(),u.on("complete",function(){l.parseRequest(this).render()}),u.on("error",function(t){l.error(t.message)}),l}},{"../../core/request":28,"../../core/utils/clone":30,"../../core/utils/extend":32,"../dataviz":52}],54:[function(t,e){var r=t("../dataviz"),n=t("../../core/utils/extend");e.exports=function(){var t=n({},r.dataTypeMap),e=this.dataType(),i=this.library(),a=this.chartType()||this.defaultChartType();return!i&&t[e]&&(i=t[e].library),i&&!a&&e&&(a=r.libraries[i]._defaults[e][0]),i&&!a&&t[e]&&(a=t[e].chartType),i&&a?r.libraries[i][a]:{}}},{"../../core/utils/extend":32,"../dataviz":52}],55:[function(t,e){function r(t){var e=t.data instanceof Array?t.data[0]:t.data,r=t.queries[0].get("property_names")||[],a={records:"result",select:!0};return r&&(a.select=[],n(r,function(t){a.select.push({path:t})})),new i(e,a)}var n=t("../../core/utils/each"),i=t("../../dataset");e.exports={extraction:r}},{"../../core/utils/each":31,"../../dataset":36}],56:[function(t,e){e.exports=function(t){var e,r=t.queries[0].analysis.replace("_"," "),n=t.queries[0].get("event_collection");return e=r.replace(/\b./g,function(t){return t.toUpperCase()}),n&&(e+=" - "+n),e}},{}],57:[function(t,e){e.exports=function(t){var e,r="string"==typeof t.params.interval,n="string"==typeof t.params.group_by,i=t.params.group_by instanceof Array;return n||r||(e="singular"),n&&!r&&(e="categorical"),r&&!n&&(e="chronological"),r&&n&&(e="cat-chronological"),!r&&i&&(e="categorical"),r&&i&&(e="cat-chronological"),"funnel"===t.analysis&&(e="cat-ordinal"),"extraction"===t.analysis&&(e="extraction"),"select_unique"===t.analysis&&(e="nominal"),e}},{}],58:[function(t,e){var r=t("../core/utils/extend"),n=t("./dataviz");r(n.prototype,{adapter:t("./lib/adapter"),attributes:t("./lib/attributes"),call:t("./lib/call"),chartOptions:t("./lib/chartOptions"),chartType:t("./lib/chartType"),colorMapping:t("./lib/colorMapping"),colors:t("./lib/colors"),data:t("./lib/data"),dataType:t("./lib/dataType"),defaultChartType:t("./lib/defaultChartType"),el:t("./lib/el"),height:t("./lib/height"),indexBy:t("./lib/indexBy"),labelMapping:t("./lib/labelMapping"),labels:t("./lib/labels"),library:t("./lib/library"),parseRawData:t("./lib/parseRawData"),parseRequest:t("./lib/parseRequest"),prepare:t("./lib/prepare"),sortGroups:t("./lib/sortGroups"),sortIntervals:t("./lib/sortIntervals"),stacked:t("./lib/stacked"),title:t("./lib/title"),width:t("./lib/width")}),r(n.prototype,{destroy:t("./lib/actions/destroy"),error:t("./lib/actions/error"),initialize:t("./lib/actions/initialize"),render:t("./lib/actions/render"),update:t("./lib/actions/update")}),e.exports=n},{"../core/utils/extend":32,"./dataviz":52,"./lib/actions/destroy":59,"./lib/actions/error":60,"./lib/actions/initialize":61,"./lib/actions/render":62,"./lib/actions/update":63,"./lib/adapter":64,"./lib/attributes":65,"./lib/call":66,"./lib/chartOptions":67,"./lib/chartType":68,"./lib/colorMapping":69,"./lib/colors":70,"./lib/data":71,"./lib/dataType":72,"./lib/defaultChartType":73,"./lib/el":74,"./lib/height":75,"./lib/indexBy":76,"./lib/labelMapping":77,"./lib/labels":78,"./lib/library":79,"./lib/parseRawData":80,"./lib/parseRequest":81,"./lib/prepare":82,"./lib/sortGroups":83,"./lib/sortIntervals":84,"./lib/stacked":85,"./lib/title":86,"./lib/width":87}],59:[function(t,e){var r=t("../../helpers/getAdapterActions");e.exports=function(){var t=r.call(this);return t.destroy&&t.destroy.apply(this,arguments),this.el()&&(this.el().innerHTML=""),this.view._prepared=!1,this.view._initialized=!1,this.view._rendered=!1,this.view._artifacts={},this}},{"../../helpers/getAdapterActions":54}],60:[function(t,e){var r=t("../../helpers/getAdapterActions"),n=t("../../dataviz");e.exports=function(){var t=r.call(this);return t.error?t.error.apply(this,arguments):n.libraries["keen-io"].error.render.apply(this,arguments),this}},{"../../dataviz":52,"../../helpers/getAdapterActions":54}],61:[function(t,e){var r=t("../../helpers/getAdapterActions"),n=t("../../dataviz");e.exports=function(){var t=r.call(this),e=n.libraries[this.view.loader.library][this.view.loader.chartType];return this.view._prepared?e.destroy&&e.destroy.apply(this,arguments):this.el()&&(this.el().innerHTML=""),t.initialize&&t.initialize.apply(this,arguments),this.view._initialized=!0,this}},{"../../dataviz":52,"../../helpers/getAdapterActions":54}],62:[function(t,e){var r=t("../../helpers/getAdapterActions"),n=t("../../utils/applyTransforms");e.exports=function(){var t=r.call(this);return n.call(this),this.view._initialized||this.initialize(),this.el()&&t.render&&(t.render.apply(this,arguments),this.view._rendered=!0),this}},{"../../helpers/getAdapterActions":54,"../../utils/applyTransforms":88}],63:[function(t,e){var r=t("../../helpers/getAdapterActions"),n=t("../../utils/applyTransforms");e.exports=function(){var t=r.call(this);return n.call(this),t.update?t.update.apply(this,arguments):t.render&&this.render(),this}},{"../../helpers/getAdapterActions":54,"../../utils/applyTransforms":88}],64:[function(t,e){var r=t("../../core/utils/each");e.exports=function(t){if(!arguments.length)return this.view.adapter;var e=this;return r(t,function(t,r){e.view.adapter[r]=t?t:null}),this}},{"../../core/utils/each":31}],65:[function(t,e){var r=t("../../core/utils/each"),n=t("./chartOptions");e.exports=function(t){if(!arguments.length)return this.view.attributes;var e=this;return r(t,function(t,r){"chartOptions"===r?n.call(e,t):e.view.attributes[r]=t}),this}},{"../../core/utils/each":31,"./chartOptions":67}],66:[function(t,e){e.exports=function(t){return t.call(this),this}},{}],67:[function(t,e){var r=t("../../core/utils/extend");e.exports=function(t){return arguments.length?(r(this.view.adapter.chartOptions,t),this):this.view.adapter.chartOptions}},{"../../core/utils/extend":32}],68:[function(t,e){e.exports=function(t){return arguments.length?(this.view.adapter.chartType=t?String(t):null,this):this.view.adapter.chartType}},{}],69:[function(t,e){function r(){var t=this,e=this.dataset.schema,r=this.dataset.output(),i=this.view.defaults.colors.slice(),a=this.colorMapping(),o=this.dataType()||"";a&&(o.indexOf("chronological")>-1||e.unpack&&r[0].length>2?n(r[0].slice(1),function(t,e){var r=a[t];r&&i[e]!==r&&i.splice(e,0,r)}):n(t.dataset.selectColumn(0).slice(1),function(t,e){var r=a[t];r&&i[e]!==r&&i.splice(e,0,r)}),t.view.attributes.colors=i)}var n=t("../../core/utils/each");e.exports=function(t){return arguments.length?(this.view.attributes.colorMapping=t?t:null,r.call(this),this):this.view.attributes.colorMapping}},{"../../core/utils/each":31}],70:[function(t,e){e.exports=function(t){return arguments.length?(this.view.attributes.colors=t instanceof Array?t:null,this.view.defaults.colors=t instanceof Array?t:null,this):this.view.attributes.colors}},{}],71:[function(t,e){var r=t("../../dataset"),n=t("../../core/request");e.exports=function(t){return arguments.length?(t instanceof r?this.dataset=t:t instanceof n?this.parseRequest(t):this.parseRawData(t),this):this.dataset.output()}},{"../../core/request":28,"../../dataset":36}],72:[function(t,e){e.exports=function(t){return arguments.length?(this.view.adapter.dataType=t?String(t):null,this):this.view.adapter.dataType}},{}],73:[function(t,e){e.exports=function(t){return arguments.length?(this.view.adapter.defaultChartType=t?String(t):null,this):this.view.adapter.defaultChartType}},{}],74:[function(t,e){e.exports=function(t){return arguments.length?(this.view.el=t,this):this.view.el}},{}],75:[function(t,e){e.exports=function(t){return arguments.length?(this.view.attributes.height=isNaN(parseInt(t))?null:parseInt(t),this):this.view.attributes.height}},{}],76:[function(t,e){function r(){var t=this,e=this.dataset.meta.schema||this.dataset.meta.unpack,r=this.indexBy().split(".").join(n.defaults.delimeter);a(e,function(e,n){"select"===n&&e instanceof Array?a(e,function(e,i){e.path.indexOf("timeframe -> ")>-1&&(t.dataset.meta.schema[n][i].path=r)}):"unpack"===n&&"object"==typeof e&&(t.dataset.meta.schema[n].index.path=r)}),this.dataset.parse()}var n=t("../../dataset"),i=t("../dataviz"),a=t("../../core/utils/each");e.exports=function(t){return arguments.length?(this.view.attributes.indexBy=t?String(t):i.defaults.indexBy,r.call(this),this):this.view.attributes.indexBy}},{"../../core/utils/each":31,"../../dataset":36,"../dataviz":52}],77:[function(t,e){function r(){var t=this,e=this.labelMapping(),r=this.dataset.schema()||{},i=this.dataType()||"";e&&(i.indexOf("chronological")>-1||r.unpack&&t.dataset.output()[0].length>2?n(t.dataset.output()[0],function(r,n){n>0&&(t.dataset.data.output[0][n]=e[r]||r)}):r.select&&2===t.dataset.output()[0].length&&t.dataset.updateColumn(0,function(t){return e[t]||t}))}var n=t("../../core/utils/each");e.exports=function(t){return arguments.length?(this.view.attributes.labelMapping=t?t:null,r.call(this),this):this.view.attributes.labelMapping}},{"../../core/utils/each":31}],78:[function(t,e){function r(){var t=this,e=this.labels()||null,r=this.dataset.schema()||{},n=this.dataset.output(),a=this.dataType()||"";e&&(a.indexOf("chronological")>-1||r.unpack&&n[0].length>2?i(n[0],function(r,n){n>0&&e[n-1]&&(t.dataset.data.output[0][n]=e[n-1])}):i(n,function(r,n){n>0&&e[n-1]&&(t.dataset.data.output[n][0]=e[n-1])}))}function n(){var t,e=this.dataset.schema()||{},r=this.dataset.output(),n=this.dataType()||"";return t=n.indexOf("chron")>-1||e.unpack&&r[0].length>2?this.dataset.selectRow(0).slice(1):this.dataset.selectColumn(0).slice(1)}var i=t("../../core/utils/each");e.exports=function(t){return arguments.length?(this.view.attributes.labels=t instanceof Array?t:null,r.call(this),this):(this.view.attributes.labels&&this.view.attributes.labels.length||(this.view.attributes.labels=n.call(this)),this.view.attributes.labels)}},{"../../core/utils/each":31}],79:[function(t,e){e.exports=function(t){return arguments.length?(this.view.adapter.library=t?String(t):null,this):this.view.adapter.library}},{}],80:[function(t,e){function r(t){var e,r,o,s,l,u,c,p=this,h={};if(e=p.indexBy()?p.indexBy():n.defaults.indexBy,r=i.defaults.delimeter,o=e.split(".").join(r),s=p.labels()||null,l=p.labelMapping()||null,"number"==typeof t.result&&(u="singular",h={records:"",select:[{path:"result",type:"string",label:"Metric"}]}),t.result instanceof Array&&t.result.length>0){if(!t.result[0].timeframe||"number"!=typeof t.result[0].value&&null!=t.result[0].value||(u="chronological",h={records:"result",select:[{path:o,type:"date"},{path:"value",type:"number"}]}),"number"==typeof t.result[0].result){u="categorical",h={records:"result",select:[]};for(var d in t.result[0])if(t.result[0].hasOwnProperty(d)&&"result"!==d){h.select.push({path:d,type:"string"});break}h.select.push({path:"result",type:"number"})}if(t.result[0].value instanceof Array){u="cat-chronological",h={records:"result",unpack:{index:{path:o,type:"date"},value:{path:"value -> result",type:"number"}}};for(var d in t.result[0].value[0])if(t.result[0].value[0].hasOwnProperty(d)&&"result"!==d){h.unpack.label={path:"value -> "+d,type:"string"};break}}"number"==typeof t.result[0]&&(u="cat-ordinal",h={records:"",unpack:{index:{path:"steps -> event_collection",type:"string"},value:{path:"result -> ",type:"number"}}}),"string"==typeof t.result[0]&&(u="nominal",c=new i,c.appendColumn("unique values",[]),a(t.result,function(t){c.appendRow(t)})),void 0===u&&(u="extraction",h={records:"result",select:!0})}return c=c instanceof i?c:new i(t,h),p.labelMapping(p.labelMapping()),p.labels(p.labels()),p.dataType(u),c}var n=t("../dataviz"),i=t("../../dataset"),a=t("../../core/utils/each");e.exports=function(t){return this.dataset=r.call(this,t),this}},{"../../core/utils/each":31,"../../dataset":36,"../dataviz":52}],81:[function(t,e){{var r=t("../helpers/getDatasetSchemas"),n=t("../helpers/getDefaultTitle"),i=t("../helpers/getQueryDataType");t("../../dataset"),t("./parseRawData")}e.exports=function(t){var e=i(t.queries[0]);return"extraction"===e?this.dataset=r.extraction(t):this.parseRawData(t.data instanceof Array?t.data[0]:t.data),this.dataType(e),this.view.defaults.title=n.call(this,t),this.title()||this.title(this.view.defaults.title),this}},{"../../dataset":36,"../helpers/getDatasetSchemas":55,"../helpers/getDefaultTitle":56,"../helpers/getQueryDataType":57,"./parseRawData":80}],82:[function(t,e){var r=t("../dataviz");e.exports=function(){var t;return this.view._rendered&&this.destroy(),this.el()&&(this.el().innerHTML="",t=r.libraries[this.view.loader.library][this.view.loader.chartType],t.initialize&&t.initialize.apply(this,arguments),t.render&&t.render.apply(this,arguments),this.view._prepared=!0),this}},{"../dataviz":52}],83:[function(t,e){function r(){var t=this.dataType();this.sortGroups()&&(t&&t.indexOf("chronological")>-1||this.data()[0].length>2?this.dataset.sortColumns(this.sortGroups(),this.dataset.getColumnSum):t&&(t.indexOf("cat-")>-1||t.indexOf("categorical")>-1)&&this.dataset.sortRows(this.sortGroups(),this.dataset.getRowSum))}e.exports=function(t){return arguments.length?(this.view.attributes.sortGroups=t?String(t):null,r.call(this),this):this.view.attributes.sortGroups}},{}],84:[function(t,e){function r(){this.sortIntervals()&&this.dataset.sortRows(this.sortIntervals())}e.exports=function(t){return arguments.length?(this.view.attributes.sortIntervals=t?String(t):null,r.call(this),this):this.view.attributes.sortIntervals}},{}],85:[function(t,e){e.exports=function(t){return arguments.length?(this.view.attributes.stacked=t?!0:!1,this):this.view.attributes.stacked}},{}],86:[function(t,e){e.exports=function(t){return arguments.length?(this.view.attributes.title=t?String(t):null,this):this.view.attributes.title}},{}],87:[function(t,e){e.exports=function(t){return arguments.length?(this.view.attributes.width=isNaN(parseInt(t))?null:parseInt(t),this):this.view.attributes.width}},{}],88:[function(t,e){e.exports=function(){this.labelMapping(this.labelMapping()).labels(this.labels()).sortGroups(this.sortGroups()).sortIntervals(this.sortIntervals())}},{}],89:[function(t,e){e.exports=function(t,e){var r,n=document,i=n.head||n.getElementsByTagName("head");setTimeout(function(){if("item"in i){if(!i[0])return void setTimeout(arguments.callee,25);i=i[0]}var r=n.createElement("script"),a=!1;r.onload=r.onreadystatechange=function(){return r.readyState&&"complete"!==r.readyState&&"loaded"!==r.readyState||a?!1:(r.onload=r.onreadystatechange=null,a=!0,void e())},r.src=t,i.insertBefore(r,i.firstChild)},0),null===n.readyState&&n.addEventListener&&(n.readyState="loading",n.addEventListener("DOMContentLoaded",r=function(){n.removeEventListener("DOMContentLoaded",r,!1),n.readyState="complete"},!1))}},{}],90:[function(t,e){e.exports=function(t,e){var r=document.createElement("link");r.setAttribute("rel","stylesheet"),r.type="text/css",r.href=t,e(),document.head.appendChild(r)}},{}],91:[function(t,e){e.exports=function(t){function e(t,r){var t=String(t),n=t.split(".");if(n.length>1){t=n[0];var i=n[1];2==t.length&&i.length>0?i.length>0?t=t+"."+i.charAt(0):t+="0":1==t.length&&i.length>0&&(t=t+"."+i.charAt(0),t+=i.length>1?i.charAt(1):"0")}var o=t.length;return t.split(".").length>1&&o--,3>=o?String(t)+a[r]:e(Number(t)/1e3,r+1)}var r=Number(t),n=r.toPrecision(3),i="",a=["","k","M","B","T"];return Number(n)==r&&String(r).length<=4?String(r):r>=1||-1>=r?(0>r&&(r=-r,i="-"),i+e(r,0)):r.toPrecision(3)}},{}],92:[function(t,e,r){(function(n){!function(t){"function"==typeof define&&define.amd&&define("keen",[],function(){return t()}),"object"==typeof r&&"undefined"!=typeof e&&(e.exports=t());var i=null;"undefined"!=typeof window?i=window:"undefined"!=typeof n?i=n:"undefined"!=typeof self&&(i=self),i&&(i.Keen=t())}(function(){var r=t("./core"),n=t("./core/utils/extend");return n(r.prototype,{addEvent:t("./core/lib/addEvent"),addEvents:t("./core/lib/addEvents"),setGlobalProperties:t("./core/lib/setGlobalProperties"),trackExternalLink:t("./core/lib/trackExternalLink"),get:t("./core/lib/get"),post:t("./core/lib/post"),put:t("./core/lib/post"),run:t("./core/lib/run"),draw:t("./dataviz/extensions/draw")}),r.Query=t("./core/query"),r.Request=t("./core/request"),r.Dataset=t("./dataset"),r.Dataviz=t("./dataviz"),r.Base64=t("./core/utils/base64"),r.Spinner=t("spin.js"),r.utils={domready:t("domready"),each:t("./core/utils/each"),extend:n,parseParams:t("./core/utils/parseParams"),prettyNumber:t("./dataviz/utils/prettyNumber")},t("./dataviz/adapters/keen-io")(),t("./dataviz/adapters/google")(),t("./dataviz/adapters/c3")(),t("./dataviz/adapters/chartjs")(),r.loaded&&setTimeout(function(){r.utils.domready(function(){r.emit("ready")})},0),t("./core/async")(),e.exports=r,r})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./core":19,"./core/async":10,"./core/lib/addEvent":20,"./core/lib/addEvents":21,"./core/lib/get":22,"./core/lib/post":23,"./core/lib/run":24,"./core/lib/setGlobalProperties":25,"./core/lib/trackExternalLink":26,"./core/query":27,"./core/request":28,"./core/utils/base64":29,"./core/utils/each":31,"./core/utils/extend":32,"./core/utils/parseParams":33,"./dataset":36,"./dataviz":58,"./dataviz/adapters/c3":48,"./dataviz/adapters/chartjs":49,"./dataviz/adapters/google":50,"./dataviz/adapters/keen-io":51,"./dataviz/extensions/draw":53,"./dataviz/utils/prettyNumber":91,domready:5,"spin.js":6}]},{},[92]),function(t){t.module("angular-keenio.config",[]).value("angular-keenio.config",{debug:!0}),t.module("angular-keenio.directives",[]),t.module("angular-keenio.services",[]),t.module("angular-keenio",["angular-keenio.config","angular-keenio.directives","angular-keenio.services"])}(angular),function(t){t.module("angular-keenio.directives").directive("tbkKeenAreachart",[function(){var t={scope:{query:"=",title:"@",width:"@",height:"@",isStacked:"@",chartOptions:"=?"},controller:["$scope",function(t){t.chartOptions=t.chartOptions||{chartArea:{height:"85%",left:"5%",top:"5%",width:"80%"},isStacked:!!t.isStacked}}],template:'<div data-tbk-keen-chart="areachart"  query="query"  height="{{height}}"  width="{{width}}"  chart-options="chartOptions" ></div>'};return t}])}(angular),function(t){t.module("angular-keenio.directives").directive("tbkKeenChart",[function(){var t={scope:{chartType:"@tbkKeenChart",query:"=",title:"@",width:"@",height:"@",chartOptions:"=?"},controller:["$scope","tbkKeenClient",function(t,e){t.keenClient=e,t.height=t.height||250,t.width=t.width||"auto",t.title=t.title||!1,t.chartOptions=t.chartOptions||{chartArea:{height:"85%",left:"5%",top:"5%",width:"80%"}}}],link:function(t,e){t.keenClient.draw(t.query,e[0],{chartType:t.chartType,title:t.title,height:t.height,width:t.width,chartOptions:t.chartOptions})}};return t}])}(angular),function(t){t.module("angular-keenio.directives").directive("tbkKeenColumnchart",[function(){var t={scope:{query:"=",title:"@",width:"@",height:"@",isStacked:"@",groupWidth:"@",chartOptions:"=?"},controller:["$scope",function(t){t.chartOptions=t.chartOptions||{chartArea:{height:"85%",left:"5%",top:"5%",width:"100%"},bar:{groupWidth:t.groupWidth||"85%"},isStacked:!!t.isStacked}}],template:'<div data-tbk-keen-chart="columnchart"  query="query"  height="{{height}}"  width="{{width}}"  chart-options="chartOptions" ></div>'};return t}])}(angular),function(t){t.module("angular-keenio.directives").directive("tbkKeenPiechart",[function(){var t={scope:{query:"=",title:"@",width:"@",height:"@",pieHole:"@",chartOptions:"=?"},controller:["$scope",function(t){t.chartOptions=t.chartOptions||{chartArea:{height:"85%",left:"5%",top:"5%",width:"100%"},pieHole:t.pieHole||.4}}],template:'<div data-tbk-keen-chart="piechart"  query="query"  height="{{height}}"  width="{{width}}"  chart-options="chartOptions" ></div>'};return t}])}(angular),function(t){t.module("angular-keenio.services").value("tbkKeenDefaultConfig",{}).provider("tbkKeenConfig",[function(){var e={};this.projectId=function(t){return e.projectId=t,this},this.readKey=function(t){return e.readKey=t,this},this.$get=["tbkKeenDefaultConfig",function(r){return t.extend(r,e)}]}]).factory("tbkKeen",["$window",function(t){return t.Keen}]).factory("tbkKeenClient",["tbkKeen","tbkKeenConfig",function(t,e){return new t({projectId:e.projectId,readKey:e.readKey})}])}(angular),function(t){"use strict";t.module("angular-keenio-demos",["angular-keenio","ui.router","tbk.githubVersion"]).filter("reverse",function(){return function(t){return t?t.slice().reverse():t}}).filter("range",["$log",function(t){return function(e,r){try{r=parseInt(r,10);for(var n=0;r>n;n++)e.push(n)}catch(i){t.warn("invalid input in repeatreange"+r)}return e}}]).config(["tbkKeenConfigProvider",function(t){var e={projectId:"5368fa5436bf5a5623000000",readKey:"3f324dcb5636316d6865ab0ebbbbc725224c7f8f3e8899c7733439965d6d4a2c7f13bf7765458790bd50ec76b4361687f51cf626314585dc246bb51aeb455c0a1dd6ce77a993d9c953c5fc554d1d3530ca5d17bdc6d1333ef3d8146a990c79435bb2c7d936f259a22647a75407921056"};t.projectId(e.projectId).readKey(e.readKey)}])}(angular),angular.module("angular-keenio-demos").directive("tbkKeenPiechartDemoPageviewsByBrowser",[function(){var t={controller:["$scope","tbkKeen",function(t,e){t.query=new e.Query("count",{eventCollection:"pageviews",groupBy:"user.device_info.browser.family",timeframe:{start:"2014-05-01T00:00:00.000Z",end:"2014-05-05T00:00:00.000Z"}}),t.chartOptions={chartArea:{height:"85%",left:"5%",top:"5%",width:"100%"},pieHole:.4}}],template:'<div data-tbk-keen-piechart  query="query"  height="250"  width="auto"  chart-options="chartOptions" ></div>'};return t}]).directive("tbkKeenAreachartDemoPageviewsByBrowser",[function(){var t={controller:["$scope","tbkKeen",function(t,e){t.query=new e.Query("count",{eventCollection:"pageviews",interval:"hourly",groupBy:"user.device_info.browser.family",timeframe:{start:"2014-05-04T00:00:00.000Z",end:"2014-05-05T00:00:00.000Z"}}),t.chartOptions={chartArea:{height:"85%",left:"5%",top:"5%",width:"80%"},isStacked:!0}}],template:'<div data-tbk-keen-areachart  query="query"  height="250"  width="auto"  is-stacked="true"  chart-options="chartOptions" ></div>'};return t}]).directive("tbkKeenColumnchartDemoImpressionsByAdvertiser",[function(){var t={controller:["$scope","tbkKeen",function(t,e){t.query=new e.Query("count",{eventCollection:"impressions",groupBy:"ad.advertiser",interval:"hourly",timeframe:{start:"2014-05-04T00:00:00.000Z",end:"2014-05-05T00:00:00.000Z"}}),t.chartOptions={chartArea:{height:"75%",left:"10%",top:"5%",width:"60%"},isStacked:!0,groupWidth:"85%"}}],template:'<div data-tbk-keen-columnchart  query="query"  height="250"  width="auto"  chart-options="chartOptions" ></div>'};return t}]).directive("tbkKeenColumnchartDemoImpressionsByDevice",[function(){var t={controller:["$scope","tbkKeen",function(t,e){t.query=new e.Query("count",{eventCollection:"impressions",groupBy:"user.device_info.device.family",interval:"hourly",timeframe:{start:"2014-05-04T00:00:00.000Z",end:"2014-05-05T00:00:00.000Z"}}),t.chartOptions={chartArea:{height:"75%",left:"10%",top:"5%",width:"60%"},isStacked:!0,groupWidth:"85%"}}],template:'<div data-tbk-keen-columnchart  query="query"  height="250"  width="auto"  chart-options="chartOptions" ></div>'};return t}]).directive("tbkKeenColumnchartDemoImpressionsByCountry",[function(){var t={controller:["$scope","tbkKeen",function(t,e){t.query=new e.Query("count",{eventCollection:"impressions",groupBy:"user.geo_info.country",interval:"hourly",timeframe:{start:"2014-05-04T00:00:00.000Z",end:"2014-05-05T00:00:00.000Z"}}),t.chartOptions={chartArea:{height:"75%",left:"10%",top:"5%",width:"60%"},isStacked:!0,groupWidth:"85%"}}],template:'<div data-tbk-keen-columnchart  query="query"  height="250"  width="auto"  chart-options="chartOptions" ></div>'};return t}]),function(t){"use strict";t.module("angular-keenio-demos").config(["$stateProvider","$urlRouterProvider",function(t,e){e.when("","/demos/overview"),e.when("/","/demos/overview"),t.state("home",{url:"/",templateUrl:"partials/demos.html",controller:"DemoCtrl"}).state("demos",{"abstract":!0,url:"/demos",template:"<ui-view/>"}).state("demos.overview",{url:"/overview",templateUrl:"partials/demos.html",controller:"DemoCtrl"}),e.otherwise("/demos/overview")}])}(angular),function(t){"use strict";t.module("angular-keenio-demos").directive("tbkCodePrettify",["$window",function(t){var e={scope:{lang:"@",showLinenums:"@"},compile:function(e){{var r=e.html();t.prettyPrintOne(r)}return function(e,r){r.addClass("prettyprint"),e.lang&&r.addClass("lang-"+e.lang),e.showLinenums&&r.addClass("linenums"),setTimeout(function(){t.prettyPrint()},1)}}};return e}]).directive("tbkHeader",function(){var t={scope:{},templateUrl:"partials/navs/header.html",controller:[function(){}]};return t})}(angular,_),function(t,e,r){"use strict";r.module("angular-keenio-demos")}(window,document,angular,_,jQuery),function(t,e,r){"use strict";r.module("angular-keenio-demos").controller("MainCtrl",[function(){}])}(window,document,angular),function(t,e,r){"use strict";r.module("angular-keenio-demos").controller("DemoCtrl",["$scope",function(t){t.subtitle="demos"}])}(window,document,angular,_,moment,jQuery),function(t){try{t=angular.module("angular-keenio-demos")}catch(e){t=angular.module("angular-keenio-demos",[])}t.run(["$templateCache",function(t){t.put("partials/demos.html",'<div class="row"><div class="col-sm-8"><div class="chart-wrapper"><div class="chart-title">Pageviews by browser (past 24 hours)<div class="pull-right"><a data-ng-click="_toggleSourcePageviewsByBrowser = !_toggleSourcePageviewsByBrowser;"><i class="fa fa-fw fa-code"></i> Source</a></div></div><div class="chart-stage"><div tbk-keen-areachart-demo-pageviews-by-browser="">Here should be an areachart.</div><div data-ng-show="_toggleSourcePageviewsByBrowser"><h4>html</h4><pre data-tbk-code-prettify="" data-lang="html">\n&lt;div tbk-keen-areachart-demo-pageviews-by-browser&gt;\n  Loading Pageviews By Browsers Areachart Demo.\n&lt;/div&gt;\n</pre><h4>directive</h4><pre data-tbk-code-prettify="">\n.directive(\'tbkKeenAreachartDemoPageviewsByBrowser\', [function() {\n  var d = {\n    controller: [\'$scope\', \'tbkKeen\', function($scope, Keen) {\n      $scope.query = new Keen.Query("count", {\n        eventCollection: "pageviews",\n        interval: "hourly",\n        groupBy: "user.device_info.browser.family",\n        timeframe: {\n          start: "2014-05-04T00:00:00.000Z",\n          end: "2014-05-05T00:00:00.000Z"\n        }\n      });\n\n      $scope.chartOptions = {\n        chartArea: {\n          height: "85%",\n          left: "5%",\n          top: "5%",\n          width: "80%"\n        },\n        isStacked: true\n      };\n    }],\n    template:\n    \'&lt;div data-tbk-keen-areachart \' +\n    \' query="query" \' +\n    \' height="250" \' +\n    \' width="auto" \' +\n    \' chart-options="chartOptions" \' +\n    \'&gt;&lt;/div&lt;\'\n  };\n\n  return d;\n}])\n</pre></div></div><div class="chart-notes">This is a sample text region to describe this chart.</div></div></div><div class="col-sm-4"><div class="chart-wrapper"><div class="chart-title">Pageviews by browser (past 5 days)</div><div class="chart-stage"><div tbk-keen-piechart-demo-pageviews-by-browser="">Here should be a piechart.</div></div><div class="chart-notes">Notes go down here</div></div></div></div><div class="row"><div class="col-sm-4"><div class="chart-wrapper"><div class="chart-title">Impressions by advertiser</div><div class="chart-stage"><div tbk-keen-columnchart-demo-impressions-by-advertiser="">Here should be a columnchart.</div></div></div></div><div class="col-sm-4"><div class="chart-wrapper"><div class="chart-title">Impressions by device</div><div class="chart-stage"><div tbk-keen-columnchart-demo-impressions-by-device="">Here should be a columnchart.</div></div><div class="chart-notes">Notes go down here</div></div></div><div class="col-sm-4"><div class="chart-wrapper"><div class="chart-title">Impressions by country</div><div class="chart-stage"><div tbk-keen-columnchart-demo-impressions-by-country="">Here should be a columnchart.</div></div><div class="chart-notes">Notes go down here</div></div></div></div>')}])}(),function(t){try{t=angular.module("angular-keenio-demos")}catch(e){t=angular.module("angular-keenio-demos",[])}t.run(["$templateCache",function(t){t.put("partials/main.html","")}])}(),function(t){try{t=angular.module("angular-keenio-demos")}catch(e){t=angular.module("angular-keenio-demos",[])}t.run(["$templateCache",function(t){t.put("partials/navs/bottom.html",'<div class="container"><div class="footer" id="footer"><p class="pull-right">with <i class="fa fa-code"></i></p></div></div>')}])}(),function(t){try{t=angular.module("angular-keenio-demos")}catch(e){t=angular.module("angular-keenio-demos",[])}t.run(["$templateCache",function(t){t.put("partials/navs/header.html",'<div class="navbar navbar-inverse navbar-fixed-top" role="navigation"><div class="container-fluid"><div class="navbar-header"><button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button> <a class="navbar-brand" href="https://github.com/theborakompanioni/angular-keenio"><span class="glyphicon glyphicon-chevron-left"></span></a> <a class="navbar-brand" data-ui-sref="home">angular-<strong>keenio</strong>.js</a></div><div class="navbar-collapse collapse"><ul class="nav navbar-nav navbar-left"><li data-ui-sref-active="active"><a data-ui-sref="demos.overview">Demos</a></li><li style="padding-top: 15px; padding-bottom: 15px;"><span style="color:#bbb; padding: 10px 15px;">Version <span data-tbk-github-version="theborakompanioni/angular-keenio"></span></span></li><li><a href="https://github.com/theborakompanioni/angular-keenio"><i class="fa fa-github"></i> GitHub Project</a></li></ul></div></div></div>')
}])}();