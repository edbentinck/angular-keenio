!function(e){e.module("angular-keenio.config",[]).value("angular-keenio.config",{debug:!0}),e.module("angular-keenio.directives",[]),e.module("angular-keenio.services",[]),e.module("angular-keenio",["angular-keenio.config","angular-keenio.directives","angular-keenio.services"])}(angular),function(e){e.module("angular-keenio.directives").directive("tbkKeenAreachart",[function(){var e={scope:{query:"=",title:"@",width:"@",height:"@",isStacked:"@",chartOptions:"=?"},controller:["$scope",function(e){e.chartOptions=e.chartOptions||{chartArea:{height:"85%",left:"5%",top:"5%",width:"80%"},isStacked:!!e.isStacked}}],template:'<div data-tbk-keen-chart="areachart"  query="query"  height="{{height}}"  width="{{width}}"  chart-options="chartOptions" ></div>'};return e}])}(angular),function(e){e.module("angular-keenio.directives").directive("tbkKeenChart",[function(){var e={scope:{chartType:"@tbkKeenChart",query:"=",title:"@",width:"@",height:"@",chartOptions:"=?"},controller:["$scope","tbkKeenClient",function(e,t){e.keenClient=t,e.height=e.height||250,e.width=e.width||"auto",e.title=e.title||!1,e.chartOptions=e.chartOptions||{chartArea:{height:"85%",left:"5%",top:"5%",width:"80%"}}}],link:function(e,t){e.keenClient.draw(e.query,t[0],{chartType:e.chartType,title:e.title,height:e.height,width:e.width,chartOptions:e.chartOptions})}};return e}])}(angular),function(e){e.module("angular-keenio.directives").directive("tbkKeenColumnchart",[function(){var e={scope:{query:"=",title:"@",width:"@",height:"@",isStacked:"@",groupWidth:"@",chartOptions:"=?"},controller:["$scope",function(e){e.chartOptions=e.chartOptions||{chartArea:{height:"85%",left:"5%",top:"5%",width:"100%"},bar:{groupWidth:e.groupWidth||"85%"},isStacked:!!e.isStacked}}],template:'<div data-tbk-keen-chart="columnchart"  query="query"  height="{{height}}"  width="{{width}}"  chart-options="chartOptions" ></div>'};return e}])}(angular),function(e){e.module("angular-keenio.directives").directive("tbkKeenMetric",["tbkKeenClient",function(e){var t={scope:{query:"=",loadingText:"@",errorText:"@",loadingClass:"@",successClass:"@",errorClass:"@"},controller:["$scope",function(e){e.texts={loading:e.loadingText||"Loading...",error:e.errorText||"An error occured!"},e.classes={loading:e.loadingClass||"tbk-angular-keenio-count-metric-loading",error:e.errorClass||"tbk-angular-keenio-count-metric-error",success:e.successClass||"tbk-angular-keenio-count-metric-success"},e.flags={loading:!1,error:!1},e.response=null}],link:function(t,r){r.addClass("tbk-angular-keenio-count-metric"),function(){t.flags.loading=!0,t.flags.error=!1,r.addClass(t.classes.loading),r.removeClass(t.classes.success),r.removeClass(t.classes.error),e.run(t.query,function(e,n){t.response=n,t.flags.loading=!1,r.removeClass(t.classes.loading),e?(t.flags.error=!0,r.addClass(t.classes.error)):(t.flags.error=!1,r.addClass(t.successClass)),t.$digest()})}()},template:'<span><span data-ng-hide="flags.loading || flags.error">{{ response.result | number:0 }}</span><span data-ng-show="flags.loading">{{ texts.loading }}</span><span data-ng-show="flags.error">{{ texts.error }}</span></span>'};return t}]).directive("tbkKeenCountUniqueMetric",[function(){var e={scope:{eventCollection:"@",targetProperty:"@",queryConfig:"=?"},controller:["$scope","tbkKeen",function(e,t){var r=e.queryConfig||{};r.eventCollection=r.eventCollection||e.eventCollection,r.targetProperty=r.targetProperty||e.targetProperty,e.query=new t.Query("count_unique",r)}],template:'<div tbk-keen-metric data-query="query"></div>'};return e}])}(angular),function(e){e.module("angular-keenio.directives").directive("tbkKeenPiechart",[function(){var e={scope:{query:"=",title:"@",width:"@",height:"@",pieHole:"@",chartOptions:"=?"},controller:["$scope",function(e){e.chartOptions=e.chartOptions||{chartArea:{height:"85%",left:"5%",top:"5%",width:"100%"},pieHole:e.pieHole||.4}}],template:'<div data-tbk-keen-chart="piechart"  query="query"  height="{{height}}"  width="{{width}}"  chart-options="chartOptions" ></div>'};return e}])}(angular),function(e){e.module("angular-keenio.services").value("tbkKeenDefaultConfig",{projectId:"YOUR_PROJECT_ID",writeKey:"YOUR_WRITE_KEY",readKey:"YOUR_READ_KEY",protocol:"https",host:"api.keen.io/3.0",requestType:"jsonp"}).provider("tbkKeenConfig",[function(){var t={};this.projectId=function(e){return t.projectId=e,this},this.writeKey=function(e){return t.writeKey=e,this},this.readKey=function(e){return t.readKey=e,this},this.protocol=function(e){return t.protocol=e,this},this.host=function(e){return t.host=e,this},this.requestType=function(e){return t.requestType=e,this},this.$get=["tbkKeenDefaultConfig",function(r){return e.extend(r,t)}]}]).factory("tbkKeen",["$window",function(e){return e.Keen}]).factory("tbkKeenClient",["tbkKeen","tbkKeenConfig",function(e,t){return new e(t)}])}(angular);